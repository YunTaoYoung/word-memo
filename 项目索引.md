# Word Memo é¡¹ç›®ç´¢å¼•

> éä¾µå…¥å¼è‹±æ–‡é˜…è¯»è¾…åŠ©ä¸AIé©±åŠ¨çš„è¯æ±‡è®°å¿†ç®¡ç†å·¥å…·
> **ç‰ˆæœ¬**: 1.0.0 | **æœ€åæ›´æ–°**: 2026-01-05

---

## ğŸ“š æ–‡æ¡£å¯¼èˆª

### æ ¸å¿ƒæ–‡æ¡£
- [äº§å“éœ€æ±‚æ–‡æ¡£ (PRD)](./PRD.md) - å®Œæ•´çš„äº§å“è§„æ ¼è¯´æ˜ã€åŠŸèƒ½å®šä¹‰å’Œç”¨æˆ·æ•…äº‹
- [æŠ€æœ¯å®ç°æ–¹æ¡ˆ](./æŠ€æœ¯å®ç°æ–¹æ¡ˆ.md) - è¯¦ç»†çš„æŠ€æœ¯æ¶æ„å’Œå®ç°ç»†èŠ‚
- [é¡¹ç›®æŒ‡å¼• (CLAUDE.md)](./CLAUDE.md) - AI è¾…åŠ©å¼€å‘æŒ‡å¼•å’Œè¯­è¨€è§„èŒƒ

### å¿«é€Ÿé“¾æ¥
- [é¡¹ç›®æ¦‚è§ˆ](#-é¡¹ç›®æ¦‚è§ˆ)
- [æŠ€æœ¯æ¶æ„](#-æŠ€æœ¯æ¶æ„)
- [ç›®å½•ç»“æ„](#-ç›®å½•ç»“æ„)
- [æ ¸å¿ƒæ¨¡å—](#-æ ¸å¿ƒæ¨¡å—)
- [å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [APIå‚è€ƒ](#-apiå‚è€ƒ)

---

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

### äº§å“å®šä½
Word Memo æ˜¯ä¸€æ¬¾ä¸“ä¸ºèŒåœºæŠ€æœ¯äººå‘˜è®¾è®¡çš„ **Edge æµè§ˆå™¨æ’ä»¶**ï¼Œé€šè¿‡æ™ºèƒ½ä¾§è¾¹æ å’Œ AI é©±åŠ¨çš„é‡Šä¹‰ç”Ÿæˆï¼Œåœ¨ä¸å¹²æ‰°åŸæ–‡é˜…è¯»çš„å‰æä¸‹ï¼Œæä¾›é«˜æ•ˆçš„è¯æ±‡å­¦ä¹ å’Œè®°å¿†ç®¡ç†ä½“éªŒã€‚

### æ ¸å¿ƒç‰¹æ€§

#### ğŸŒŸ éä¾µå…¥å¼è®¾è®¡
- ä¾§è¾¹æ å±•ç¤ºé‡Šä¹‰ï¼Œä¿æŒåŸæ–‡å®Œæ•´æ€§
- ä»…é«˜äº®ç”¨æˆ·æ·»åŠ çš„ç”Ÿè¯ï¼Œæ— ç¿»è¯‘è¦†ç›–
- å¯è§†åŒºåŸŸæ™ºèƒ½æ‰«æï¼Œæ€§èƒ½ä¼˜åŒ–

#### ğŸ¤– AI æ™ºèƒ½é‡Šä¹‰
- æ”¯æŒä»»ä½• OpenAI API å…¼å®¹æ¥å£
- æ¨èæ¨¡å‹: `gpt-3.5-turbo-0125`
- è‡ªåŠ¨ç”ŸæˆéŸ³æ ‡ã€é‡Šä¹‰ã€ä¾‹å¥ã€è¯æ ¹è¯ç¼€
- å¯ç¼–è¾‘å’Œè‡ªå®šä¹‰é‡Šä¹‰å†…å®¹

#### ğŸ§  ç§‘å­¦è®°å¿†ç®¡ç†
- åŸºäºé—å¿˜æ›²çº¿çš„å¤šçº§è®°å¿†çŠ¶æ€ç³»ç»Ÿ
- 5ä¸ªè®°å¿†ç­‰çº§: NEW â†’ FAMILIAR â†’ LEARNING â†’ MASTERED â†’ ARCHIVED
- è‡ªåŠ¨é™çº§æœºåˆ¶ï¼Œé€‚åº”é—å¿˜è§„å¾‹
- è§†è§‰å·®å¼‚åŒ–æ˜¾ç¤º(é¢œè‰²ã€ä¸‹åˆ’çº¿ã€å¡ç‰‡å¤§å°)

#### ğŸ“± å‹å¥½ç”¨æˆ·ä½“éªŒ
- è™šæ‹Ÿæ»šåŠ¨ä¼˜åŒ–ï¼Œæ”¯æŒå¤§é‡å•è¯
- æ¨¡ç³Šæœç´¢è¯åº“
- å¾…å¤ä¹ æé†’
- è¯åº“å¯¼å…¥/å¯¼å‡º

### æŠ€æœ¯æ ˆ

| åˆ†ç±» | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **æ¡†æ¶** | React | 18.2.0 | UI æ„å»º |
| **è¯­è¨€** | TypeScript | 5.3.3 | ç±»å‹å®‰å…¨ |
| **æ„å»º** | Vite | 5.0.10 | å¼€å‘&æ„å»º |
| **æ’ä»¶å¼€å‘** | @crxjs/vite-plugin | 2.3.0 | Manifest V3 æ”¯æŒ |
| **çŠ¶æ€ç®¡ç†** | Zustand | 4.4.7 | è½»é‡çº§çŠ¶æ€ |
| **æ ·å¼** | Tailwind CSS | 3.4.0 | å¿«é€Ÿæ ·å¼å¼€å‘ |
| **è™šæ‹Ÿæ»šåŠ¨** | react-window | 1.8.10 | æ€§èƒ½ä¼˜åŒ– |
| **è¯å½¢è¿˜åŸ** | compromise | 14.11.0 | NLP å¤„ç† |
| **æ¨¡ç³Šæœç´¢** | Fuse.js | 7.0.0 | æœç´¢åŠŸèƒ½ |

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Edge Browser (Manifest V3)                â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚               Web Page (Content Scripts)                â”‚ â”‚
â”‚  â”‚  â€¢ scanner.ts - é¡µé¢æ‰«æä¸å•è¯åŒ¹é…                      â”‚ â”‚
â”‚  â”‚  â€¢ toast.ts - é€šçŸ¥æç¤º                                  â”‚ â”‚
â”‚  â”‚  â€¢ index.ts - å†…å®¹è„šæœ¬å…¥å£                              â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â”‚ (chrome.runtime.sendMessage)        â”‚
â”‚                        â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚          Background Service Worker                      â”‚ â”‚
â”‚  â”‚  â€¢ service-worker.ts - ç”Ÿå‘½å‘¨æœŸç®¡ç†                     â”‚ â”‚
â”‚  â”‚  â€¢ llm-client.ts - LLM API è°ƒç”¨                         â”‚ â”‚
â”‚  â”‚  â€¢ context-menu.ts - å³é”®èœå•                           â”‚ â”‚
â”‚  â”‚  â€¢ alarm-handler.ts - å®šæ—¶ä»»åŠ¡(é—å¿˜æ›²çº¿)                â”‚ â”‚
â”‚  â”‚  â€¢ message-handler.ts - æ¶ˆæ¯è·¯ç”±                        â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â”‚                                     â”‚
â”‚                        â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Side Panel (React App)                     â”‚ â”‚
â”‚  â”‚  â€¢ App.tsx - ä¸»åº”ç”¨                                     â”‚ â”‚
â”‚  â”‚  â€¢ WordList - å•è¯åˆ—è¡¨(è™šæ‹Ÿæ»šåŠ¨)                        â”‚ â”‚
â”‚  â”‚  â€¢ WordCard - å•è¯å¡ç‰‡                                  â”‚ â”‚
â”‚  â”‚  â€¢ WordDetail - å•è¯è¯¦æƒ…                                â”‚ â”‚
â”‚  â”‚  â€¢ VocabularyManagement - è¯åº“ç®¡ç†                      â”‚ â”‚
â”‚  â”‚  â€¢ Settings - è®¾ç½®é¡µé¢                                  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                        â”‚                                     â”‚
â”‚                        â†“                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚            chrome.storage.local                         â”‚ â”‚
â”‚  â”‚  â€¢ vocabulary: Map<string, WordData>                    â”‚ â”‚
â”‚  â”‚  â€¢ settings: UserSettings                               â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚ HTTPS
                           â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  LLM API (å…¼å®¹ OpenAI) â”‚
              â”‚  â€¢ gpt-3.5-turbo       â”‚
              â”‚  â€¢ å›½å†…å¤§æ¨¡å‹           â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ•°æ®æµ

#### 1. æ·»åŠ å•è¯æµç¨‹
```
ç”¨æˆ·é€‰ä¸­å•è¯
  â†“
å³é”®èœå•: "æ·»åŠ åˆ°è¯åº“"
  â†“
Content Script æ•è·
  â†“
Background Worker æ¥æ”¶
  â†“
è°ƒç”¨ LLM API ç”Ÿæˆé‡Šä¹‰
  â†“
ä¿å­˜åˆ° chrome.storage.local
  â†“
é€šçŸ¥ Side Panel æ›´æ–° UI
  â†“
é¡µé¢é«˜äº®æ˜¾ç¤ºå•è¯
```

#### 2. è®°å¿†å¤ä¹ æµç¨‹
```
ç”¨æˆ·æŸ¥çœ‹å•è¯å¡ç‰‡
  â†“
ç‚¹å‡» "è®°ä½äº†" æˆ– "è¿˜ä¸ç†Ÿ"
  â†“
æ›´æ–°è®°å¿†çŠ¶æ€(level, reviewCount)
  â†“
è®¡ç®—ä¸‹æ¬¡å¤ä¹ æ—¶é—´(é—å¿˜æ›²çº¿)
  â†“
ä¿å­˜åˆ°å­˜å‚¨
  â†“
æ›´æ–°å¡ç‰‡æ ·å¼(é¢œè‰²/ä¸‹åˆ’çº¿)
```

#### 3. è‡ªåŠ¨é™çº§æœºåˆ¶
```
Background Alarm (æ¯30åˆ†é’Ÿ)
  â†“
æ£€æŸ¥æ‰€æœ‰å•è¯çš„ nextReviewDate
  â†“
è¶…è¿‡å¤ä¹ æ—¶é—´ 1.5 å€?
  â†“ (æ˜¯)
é™çº§è®°å¿†ç­‰çº§
  â†“
æ›´æ–° UI æ˜¾ç¤º
```

---

## ğŸ“‚ ç›®å½•ç»“æ„

### å®Œæ•´é¡¹ç›®ç»“æ„
```
word-memo/
â”œâ”€â”€ manifest.json              # Extension Manifest V3 é…ç½®
â”œâ”€â”€ package.json              # ä¾èµ–ç®¡ç†å’Œè„šæœ¬
â”œâ”€â”€ tsconfig.json             # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts            # Vite æ„å»ºé…ç½®
â”œâ”€â”€ tailwind.config.js        # Tailwind CSS é…ç½®
â”œâ”€â”€ postcss.config.js         # PostCSS é…ç½®
â”‚
â”œâ”€â”€ docs/                     # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ PRD.md               # äº§å“éœ€æ±‚æ–‡æ¡£
â”‚   â”œâ”€â”€ æŠ€æœ¯å®ç°æ–¹æ¡ˆ.md       # æŠ€æœ¯å®ç°æ–‡æ¡£
â”‚   â””â”€â”€ é¡¹ç›®ç´¢å¼•.md          # æœ¬æ–‡æ¡£
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ background/          # Background Service Worker
â”‚   â”‚   â”œâ”€â”€ service-worker.ts       # ä¸»å…¥å£
â”‚   â”‚   â”œâ”€â”€ llm-client.ts           # LLM API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ context-menu.ts         # å³é”®èœå•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ message-handler.ts      # æ¶ˆæ¯è·¯ç”±
â”‚   â”‚   â””â”€â”€ alarm-handler.ts        # å®šæ—¶ä»»åŠ¡(é—å¿˜æ›²çº¿æ£€æŸ¥)
â”‚   â”‚
â”‚   â”œâ”€â”€ content/             # Content Script
â”‚   â”‚   â”œâ”€â”€ index.ts                # ä¸»å…¥å£
â”‚   â”‚   â””â”€â”€ toast.ts                # Toast é€šçŸ¥
â”‚   â”‚
â”‚   â”œâ”€â”€ sidepanel/           # ä¾§è¾¹æ  UI (React)
â”‚   â”‚   â”œâ”€â”€ index.html              # HTML å…¥å£
â”‚   â”‚   â”œâ”€â”€ main.tsx                # React å…¥å£
â”‚   â”‚   â”œâ”€â”€ App.tsx                 # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ components/             # UI ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ Settings.tsx              # è®¾ç½®é¡µé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ WordCard.tsx              # å•è¯å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ WordList.tsx              # å•è¯åˆ—è¡¨
â”‚   â”‚   â”‚   â”œâ”€â”€ WordDetail.tsx            # å•è¯è¯¦æƒ…
â”‚   â”‚   â”‚   â””â”€â”€ VocabularyManagement.tsx  # è¯åº“ç®¡ç†
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ hooks/                  # Custom Hooks
â”‚   â”‚       â”œâ”€â”€ useWordStore.ts           # è¯åº“çŠ¶æ€ç®¡ç†
â”‚   â”‚       â””â”€â”€ useSettings.ts            # è®¾ç½®çŠ¶æ€ç®¡ç†
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                 # å…±äº«å·¥å…·åº“
â”‚   â”‚   â”œâ”€â”€ storage.ts              # chrome.storage æŠ½è±¡å±‚
â”‚   â”‚   â”œâ”€â”€ memory-algorithm.ts     # é—å¿˜æ›²çº¿ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ word-normalizer.ts      # è¯å½¢è¿˜åŸ(compromise.js)
â”‚   â”‚   â”œâ”€â”€ search.ts               # æ¨¡ç³Šæœç´¢(Fuse.js)
â”‚   â”‚   â”œâ”€â”€ utils.ts                # é€šç”¨å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ constants.ts            # å¸¸é‡å®šä¹‰
â”‚   â”‚
â”‚   â””â”€â”€ types/               # TypeScript ç±»å‹å®šä¹‰
â”‚       â”œâ”€â”€ index.ts                # æ ¸å¿ƒç±»å‹
â”‚       â”œâ”€â”€ messages.ts             # æ¶ˆæ¯ç±»å‹
â”‚       â””â”€â”€ storage.ts              # å­˜å‚¨ç±»å‹
â”‚
â””â”€â”€ public/                  # é™æ€èµ„æº
    â””â”€â”€ icons/                      # æ’ä»¶å›¾æ ‡
```

### å…³é”®æ–‡ä»¶è¯´æ˜

#### é…ç½®æ–‡ä»¶
- **[manifest.json](./manifest.json)** - Chrome Extension Manifest V3 é…ç½®
- **[vite.config.ts](./vite.config.ts)** - Vite æ„å»ºé…ç½®(ä½¿ç”¨ @crxjs/vite-plugin)
- **[package.json](./package.json)** - é¡¹ç›®ä¾èµ–å’Œè„šæœ¬å‘½ä»¤

#### ç±»å‹å®šä¹‰
- **[src/types/index.ts](./src/types/index.ts)** - æ ¸å¿ƒæ•°æ®ç»“æ„(WordData, MemoryLevel, UserSettings)
- **[src/types/storage.ts](./src/types/storage.ts)** - å­˜å‚¨ç›¸å…³ç±»å‹
- **[src/types/messages.ts](./src/types/messages.ts)** - æ¶ˆæ¯ä¼ é€’ç±»å‹

#### æ ¸å¿ƒé€»è¾‘
- **[src/lib/storage.ts](./src/lib/storage.ts)** - å­˜å‚¨æŠ½è±¡å±‚(åºåˆ—åŒ–/ååºåˆ—åŒ–)
- **[src/lib/memory-algorithm.ts](./src/lib/memory-algorithm.ts)** - é—å¿˜æ›²çº¿ç®—æ³•å®ç°
- **[src/lib/word-normalizer.ts](./src/lib/word-normalizer.ts)** - è¯å½¢è¿˜åŸé€»è¾‘

---

## ğŸ”§ æ ¸å¿ƒæ¨¡å—

### 1. Background Service Worker

#### ä¸»è¦èŒè´£
- æ³¨å†Œå³é”®èœå•
- ç®¡ç†å®šæ—¶ä»»åŠ¡(é—å¿˜æ›²çº¿æ£€æŸ¥)
- å¤„ç† LLM API è°ƒç”¨
- æ¶ˆæ¯è·¯ç”±(Content Script â†” Side Panel)

#### å…³é”®æ–‡ä»¶

##### [service-worker.ts](./src/background/service-worker.ts)
```typescript
// åˆå§‹åŒ–æ’ä»¶
chrome.runtime.onInstalled.addListener(async (details) => {
  // æ³¨å†Œå³é”®èœå•
  chrome.contextMenus.create({
    id: 'add-to-vocabulary',
    title: 'ğŸ“š æ·»åŠ åˆ°è¯åº“',
    contexts: ['selection'],
  });

  // æ³¨å†Œå®šæ—¶ä»»åŠ¡(æ¯30åˆ†é’Ÿæ£€æŸ¥é—å¿˜æ›²çº¿)
  chrome.alarms.create('checkMemoryDecay', {
    periodInMinutes: 30,
  });

  // åˆå§‹åŒ–é»˜è®¤è®¾ç½®
  await initializeDefaultSettings();
});
```

##### [llm-client.ts](./src/background/llm-client.ts)
LLM API å®¢æˆ·ç«¯ï¼Œæ”¯æŒ OpenAI å…¼å®¹æ¥å£:
- æ¨èæ¨¡å‹: `gpt-3.5-turbo-0125`
- æ”¯æŒå›½å†…å¤§æ¨¡å‹(æ™ºè°±ã€DeepSeekã€ç™¾å·ç­‰)
- è¶…æ—¶æ§åˆ¶: 30s
- å¼ºåˆ¶ JSON è¾“å‡ºæ ¼å¼

##### [alarm-handler.ts](./src/background/alarm-handler.ts)
å®šæ—¶ä»»åŠ¡å¤„ç†:
- æ¯30åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡
- è¶…è¿‡å¤ä¹ æ—¶é—´ 1.5 å€è‡ªåŠ¨é™çº§
- é€šçŸ¥ UI æ›´æ–°

### 2. Content Script

#### ä¸»è¦èŒè´£
- æ‰«æé¡µé¢æ–‡æœ¬èŠ‚ç‚¹
- åŒ¹é…è¯åº“å•è¯
- æ˜¾ç¤º Toast é€šçŸ¥

#### å…³é”®æ–‡ä»¶

##### [index.ts](./src/content/index.ts)
å†…å®¹è„šæœ¬ä¸»å…¥å£:
- ç›‘å¬æ¥è‡ª Background çš„æ¶ˆæ¯
- å¤„ç†å•è¯æ·»åŠ /åˆ é™¤äº‹ä»¶
- æ˜¾ç¤ºé€šçŸ¥æç¤º

##### [toast.ts](./src/content/toast.ts)
Toast é€šçŸ¥ç»„ä»¶:
- æ·»åŠ æˆåŠŸ/å¤±è´¥æç¤º
- è‡ªåŠ¨æ¶ˆå¤±åŠ¨ç”»
- æ ·å¼ä¼˜åŒ–

### 3. Side Panel (React App)

#### ä¸»è¦ç»„ä»¶

##### [App.tsx](./src/sidepanel/App.tsx)
ä¸»åº”ç”¨ç»„ä»¶:
- Tab åˆ‡æ¢(å½“å‰é¡µç”Ÿè¯ / è¯åº“ç®¡ç†)
- å¾…å¤ä¹ æé†’
- çŠ¶æ€ç®¡ç†(useWordStore, useSettings)

##### [WordList.tsx](./src/sidepanel/components/WordList.tsx)
å•è¯åˆ—è¡¨ç»„ä»¶:
- è™šæ‹Ÿæ»šåŠ¨(react-window)
- è®°å¿†ç­‰çº§æ’åº
- é«˜äº®å½“å‰å•è¯

##### [WordCard.tsx](./src/sidepanel/components/WordCard.tsx)
å•è¯å¡ç‰‡ç»„ä»¶:
- åˆ†çº§æ ·å¼(é¢œè‰²/è¾¹æ¡†)
- å¯æŠ˜å /å±•å¼€
- è®°å¿†åé¦ˆæŒ‰é’®(è®°ä½äº†/è¿˜ä¸ç†Ÿ)

##### [WordDetail.tsx](./src/sidepanel/components/WordDetail.tsx)
å•è¯è¯¦æƒ…é¡µ:
- å®Œæ•´é‡Šä¹‰å±•ç¤º
- ç¼–è¾‘åŠŸèƒ½
- åˆ é™¤ç¡®è®¤

##### [VocabularyManagement.tsx](./src/sidepanel/components/VocabularyManagement.tsx)
è¯åº“ç®¡ç†:
- æœç´¢è¿‡æ»¤
- ç»Ÿè®¡ä¿¡æ¯
- ç½‘æ ¼å¸ƒå±€

##### [Settings.tsx](./src/sidepanel/components/Settings.tsx)
è®¾ç½®é¡µé¢:
- LLM API é…ç½®
- æ˜¾ç¤ºé€‰é¡¹
- è¿æ¥æµ‹è¯•

#### Custom Hooks

##### [useWordStore.ts](./src/sidepanel/hooks/useWordStore.ts)
è¯åº“çŠ¶æ€ç®¡ç†(Zustand):
- è¯åº“åˆ—è¡¨åŠ è½½
- å¯è§å•è¯è¿½è¸ª
- é«˜äº®å•è¯çŠ¶æ€
- åˆ·æ–°æœºåˆ¶

##### [useSettings.ts](./src/sidepanel/hooks/useSettings.ts)
è®¾ç½®çŠ¶æ€ç®¡ç†:
- LLM é…ç½®
- æ˜¾ç¤ºé€‰é¡¹
- ä¾§è¾¹æ å®½åº¦

### 4. å…±äº«å·¥å…·åº“

#### [storage.ts](./src/lib/storage.ts)
å­˜å‚¨æŠ½è±¡å±‚:
```typescript
// è·å–è¯åº“
getVocabulary(): Promise<Map<string, WordData>>

// ä¿å­˜å•è¯
saveWord(word: WordData): Promise<void>

// åˆ é™¤å•è¯
deleteWord(word: string): Promise<void>

// è·å–/ä¿å­˜è®¾ç½®
getSettings(): Promise<UserSettings>
saveSettings(settings: UserSettings): Promise<void>

// è·å–å¾…å¤ä¹ å•è¯
getReviewQueue(): Promise<string[]>
```

#### [memory-algorithm.ts](./src/lib/memory-algorithm.ts)
é—å¿˜æ›²çº¿ç®—æ³•:
```typescript
// è®¡ç®—ä¸‹æ¬¡å¤ä¹ æ—¶é—´
calculateNextReview(level: MemoryLevel, isRemembered: boolean): Date

// å‡çº§/é™çº§è®°å¿†ç­‰çº§
upgradeLevel(currentLevel: MemoryLevel): MemoryLevel
downgradeLevel(currentLevel: MemoryLevel): MemoryLevel

// æ£€æŸ¥æ˜¯å¦éœ€è¦é™çº§
shouldDowngrade(state: WordMemoryState): boolean

// ç”¨æˆ·åé¦ˆå¤„ç†
handleRemembered(word: WordData): Promise<void>
handleNotRemembered(word: WordData): Promise<void>
```

#### [word-normalizer.ts](./src/lib/word-normalizer.ts)
è¯å½¢è¿˜åŸ(ä½¿ç”¨ compromise.js):
```typescript
// æ ‡å‡†åŒ–å•è¯(å°å†™ + è¯å½¢è¿˜åŸ)
normalizeWord(word: string): string
// ç¤ºä¾‹: "running" â†’ "run"
```

#### [search.ts](./src/lib/search.ts)
æ¨¡ç³Šæœç´¢(ä½¿ç”¨ Fuse.js):
```typescript
// æœç´¢è¯åº“
searchVocabulary(words: WordData[], query: string): WordData[]
```

---

## ğŸ” API å‚è€ƒ

### æ•°æ®ç»“æ„

#### WordData
```typescript
interface WordData {
  word: string;                 // å•è¯åŸæ–‡(å°å†™)
  phonetic: string;             // éŸ³æ ‡
  definitions: Definition[];    // é‡Šä¹‰åˆ—è¡¨
  examples: Example[];          // ä¾‹å¥åˆ—è¡¨
  etymology: string;            // è¯æ ¹è¯ç¼€
  memoryState: WordMemoryState; // è®°å¿†çŠ¶æ€
  addedDate: Date;              // æ·»åŠ æ—¶é—´
  updatedDate: Date;            // æœ€åç¼–è¾‘æ—¶é—´
  source?: string;              // æ¥æºé¡µé¢URL
}
```

#### MemoryLevel (è®°å¿†ç­‰çº§)
```typescript
enum MemoryLevel {
  NEW = 0,        // æ–°è¯ - çº¢è‰²æ³¢æµªä¸‹åˆ’çº¿
  FAMILIAR = 1,   // æœ‰å°è±¡ - æ©™è‰²å®çº¿ä¸‹åˆ’çº¿
  LEARNING = 2,   // å­¦ä¹ ä¸­ - é»„è‰²è™šçº¿ä¸‹åˆ’çº¿
  MASTERED = 3,   // å·²æŒæ¡ - ç»¿è‰²ç‚¹çŠ¶ä¸‹åˆ’çº¿
  ARCHIVED = 4    // å·²å½’æ¡£ - ä¸æ˜¾ç¤º
}
```

#### WordMemoryState
```typescript
interface WordMemoryState {
  level: MemoryLevel;           // å½“å‰è®°å¿†ç­‰çº§
  reviewCount: number;          // æ€»å¤ä¹ æ¬¡æ•°
  correctCount: number;         // ç‚¹å‡»"è®°ä½"çš„æ¬¡æ•°
  lastReviewDate: Date;         // ä¸Šæ¬¡å¤ä¹ æ—¶é—´
  nextReviewDate: Date;         // ä¸‹æ¬¡å¤ä¹ æ—¶é—´(åŸºäºé—å¿˜æ›²çº¿)
  lastSeenDate: Date;           // æœ€åä¸€æ¬¡åœ¨é¡µé¢ä¸­å‡ºç°çš„æ—¶é—´
}
```

#### UserSettings
```typescript
interface UserSettings {
  llm: LLMConfig;               // LLM é…ç½®
  display: {
    enableHighlight: boolean;   // æ˜¯å¦é«˜äº®é¡µé¢å•è¯
    ignoreCodeBlocks: boolean;  // æ˜¯å¦å¿½ç•¥ä»£ç å—
    showReviewReminder: boolean; // æ˜¯å¦æ˜¾ç¤ºå¾…å¤ä¹ æé†’
    autoPlayPronunciation: boolean; // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾å‘éŸ³
  };
  sidebar: {
    width: number;              // ä¾§è¾¹æ å®½åº¦(300-600px)
    collapsed: boolean;         // æ˜¯å¦æŠ˜å 
  };
}
```

### é—å¿˜æ›²çº¿å‚æ•°

#### å¤ä¹ é—´éš”(å¤©)
| è®°å¿†ç­‰çº§ | è®°ä½äº† | è¿˜ä¸ç†Ÿ |
|---------|--------|--------|
| NEW     | 1å¤©    | 0.5å¤©  |
| FAMILIAR| 3å¤©    | 1å¤©    |
| LEARNING| 7å¤©    | 3å¤©    |
| MASTERED| 30å¤©   | 7å¤©    |
| ARCHIVED| 90å¤©   | 30å¤©   |

#### é™çº§é˜ˆå€¼
è¶…è¿‡ `nextReviewDate` çš„ **1.5 å€**æ—¶é—´æœªå¤ä¹ ï¼Œè‡ªåŠ¨é™çº§ã€‚

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- **Node.js**: >= 16.0.0
- **npm**: >= 8.0.0
- **æµè§ˆå™¨**: Microsoft Edge (Manifest V3 æ”¯æŒ)

### å¿«é€Ÿå¼€å§‹

#### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

#### 2. å¼€å‘æ¨¡å¼
```bash
npm run dev
```
æ„å»ºç»“æœè¾“å‡ºåˆ° `dist/` ç›®å½•ã€‚

#### 3. åŠ è½½åˆ° Edge æµè§ˆå™¨
1. æ‰“å¼€ `edge://extensions/`
2. å¯ç”¨ "å¼€å‘è€…æ¨¡å¼"
3. ç‚¹å‡» "åŠ è½½è§£å‹ç¼©çš„æ‰©å±•"
4. é€‰æ‹© `dist/` æ–‡ä»¶å¤¹

#### 4. ç”Ÿäº§æ„å»º
```bash
npm run build
```

#### 5. ç±»å‹æ£€æŸ¥
```bash
npm run type-check
```

### å¼€å‘è§„èŒƒ

#### è¯­è¨€ä½¿ç”¨
- **ä»£ç **: è‹±æ–‡å‘½å(å‡½æ•°ã€å˜é‡ã€ç±»å‹)
- **æ³¨é‡Š**: è‹±æ–‡
- **æ–‡æ¡£**: ç®€ä½“ä¸­æ–‡
- **UIæ–‡æœ¬**: ç®€ä½“ä¸­æ–‡

#### ä»£ç é£æ ¼
- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- ä¼˜å…ˆä½¿ç”¨å‡½æ•°å¼ç¼–ç¨‹
- éµå¾ª React Hooks è§„èŒƒ
- ä½¿ç”¨ Tailwind CSS å·¥å…·ç±»

### è°ƒè¯•æŠ€å·§

#### Background Service Worker
```javascript
// åœ¨ Background DevTools Console ä¸­
chrome.storage.local.get(null, console.log); // æŸ¥çœ‹æ‰€æœ‰å­˜å‚¨æ•°æ®
```

#### Content Script
```javascript
// åœ¨é¡µé¢ DevTools Console ä¸­
// Content Script å’Œ Page ç¯å¢ƒéš”ç¦»,éœ€è¦åœ¨æ‰©å±•æ£€æŸ¥å™¨ä¸­è°ƒè¯•
```

#### Side Panel
- å³é”®ä¾§è¾¹æ  â†’ æ£€æŸ¥
- React DevTools å¯ç”¨

### å¸¸è§é—®é¢˜

#### Q: LLM API è°ƒç”¨å¤±è´¥?
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹:
1. API Key æ˜¯å¦æ­£ç¡®
2. API Endpoint æ˜¯å¦å¯è®¿é—®
3. æ¨¡å‹åç§°æ˜¯å¦æ­£ç¡®
4. ç½‘ç»œæ˜¯å¦æ­£å¸¸

#### Q: é¡µé¢å•è¯æ— é«˜äº®?
**A**: å¯èƒ½åŸå› :
1. è¯åº“ä¸ºç©º
2. è®¾ç½®ä¸­å…³é—­äº†é«˜äº®åŠŸèƒ½
3. é¡µé¢å†…å®¹åœ¨ `<code>` æˆ– `<pre>` ä¸­(é»˜è®¤å¿½ç•¥)

#### Q: ä¾§è¾¹æ ä¸æ˜¾ç¤º?
**A**:
1. ç¡®è®¤å·²æ‰“å¼€ä¾§è¾¹æ (ç‚¹å‡»æ’ä»¶å›¾æ ‡)
2. æ£€æŸ¥ Side Panel æƒé™æ˜¯å¦æˆäºˆ

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### å·²å®ç°çš„ä¼˜åŒ–
âœ… **è™šæ‹Ÿæ»šåŠ¨** (react-window)
âœ… **Debounce æ»šåŠ¨äº‹ä»¶** (200ms)
âœ… **å¯è§†åŒºåŸŸé™åˆ¶æ‰«æ**
âœ… **è¯åº“ç´¢å¼•ä¼˜åŒ–** (Set æŸ¥æ‰¾ O(1))
âœ… **React.memo ç»„ä»¶ç¼“å­˜**

### æ€§èƒ½æŒ‡æ ‡
- é¡µé¢æ‰«ææ—¶é—´: < 100ms (1000+ å•è¯é¡µé¢)
- ä¾§è¾¹æ æ¸²æŸ“: 60fps
- LLM ç”Ÿæˆè€—æ—¶: < 5s (gpt-3.5-turbo)

---

## ğŸ” å®‰å…¨æ€§

### API Key ä¿æŠ¤
- æœ¬åœ°åŠ å¯†å­˜å‚¨(chrome.storage.local)
- ä¸ä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨
- ä»…åœ¨ Background Worker ä¸­ä½¿ç”¨

### æƒé™è¯´æ˜
| æƒé™ | ç”¨é€” |
|------|------|
| `storage` | ä¿å­˜è¯åº“å’Œè®¾ç½® |
| `contextMenus` | å³é”®èœå• "æ·»åŠ åˆ°è¯åº“" |
| `sidePanel` | ä¾§è¾¹æ  UI |
| `alarms` | å®šæ—¶æ£€æŸ¥é—å¿˜æ›²çº¿ |
| `host_permissions: https://*/*` | Content Script æ³¨å…¥(ä»…HTTPSé¡µé¢) |

---

## ğŸ“ˆ ç‰ˆæœ¬å†å²

### v1.0.0 (2026-01-05)
- âœ… æ ¸å¿ƒåŠŸèƒ½å®ç°
  - å³é”®æ·»åŠ å•è¯
  - LLM ç”Ÿæˆé‡Šä¹‰
  - é—å¿˜æ›²çº¿ç®—æ³•
  - ä¾§è¾¹æ å±•ç¤º
  - è¯åº“ç®¡ç†
  - è®¾ç½®é¡µé¢

### è§„åˆ’ä¸­çš„åŠŸèƒ½ (v2.0)
- â˜ï¸ äº‘åŒæ­¥(è·¨è®¾å¤‡)
- ğŸ“¤ å¯¼å‡º Anki å¡ç‰‡
- ğŸ”Š è¯­éŸ³æœ—è¯»
- ğŸ“Š å­¦ä¹ ç»Ÿè®¡é¢æ¿
- ğŸŒ³ è¯æ ¹è¯ç¼€å…³è”ç½‘ç»œ

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### æŠ¥å‘Šé—®é¢˜
è¯·åœ¨ GitHub Issues ä¸­æäº¤é—®é¢˜ï¼Œå¹¶æä¾›:
- æµè§ˆå™¨ç‰ˆæœ¬
- æ’ä»¶ç‰ˆæœ¬
- è¯¦ç»†çš„é‡ç°æ­¥éª¤
- é”™è¯¯æˆªå›¾æˆ–æ—¥å¿—

### æäº¤ä»£ç 
1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

---

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®åœ°å€**: [GitHub Repository]
- **é—®é¢˜åé¦ˆ**: [GitHub Issues]
- **æ–‡æ¡£**:
  - [PRD.md](./PRD.md) - äº§å“éœ€æ±‚æ–‡æ¡£
  - [æŠ€æœ¯å®ç°æ–¹æ¡ˆ.md](./æŠ€æœ¯å®ç°æ–¹æ¡ˆ.md) - æŠ€æœ¯æ¶æ„æ–‡æ¡£

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚

---

**æœ€åæ›´æ–°**: 2026-01-05
**æ–‡æ¡£ç‰ˆæœ¬**: 1.0.0
