# Word Memo 测试指南

## 前置条件

1. **构建项目**
   ```bash
   npm run build
   ```
   > 注意:项目使用 CRXJS Vite 插件,会自动处理 Chrome 扩展的打包和模块加载

2. **准备 API Key**
   - OpenAI API Key (或其他兼容的 LLM API)
   - API 端点地址

## 在 Edge 浏览器中加载扩展

### 步骤 1: 加载扩展

1. 打开 Edge 浏览器
2. 访问 `edge://extensions/`
3. 在右上角启用 **"开发者模式"**
4. 点击 **"加载解压缩的扩展"**
5. 选择项目的 `dist/` 文件夹
6. 确认扩展已加载成功

**重要提示**: 如果之前已经加载过扩展,请先删除旧版本再加载新版本,或者点击刷新按钮。

### 步骤 2: 检查扩展状态

- ✅ 扩展图标应该出现在浏览器工具栏
- ✅ 扩展详情页应该显示 "Word Memo - 词汇记忆助手"
- ✅ 没有错误提示

## 功能测试清单

### 1. 首次启动和设置

**测试步骤:**

1. 点击扩展图标，打开侧边栏
2. 应该看到欢迎屏幕，提示 "⚠️ 未配置API"
3. 点击 "前往设置" 或右上角的 ⚙️ 按钮

**预期结果:**
- ✅ 欢迎屏幕显示正确
- ✅ 设置按钮可点击
- ✅ 设置页面正常打开

### 2. LLM API 配置

**测试步骤:**

1. 在设置页面填写以下信息:
   - **API 端点**: `https://api.openai.com/v1/chat/completions`
   - **API Key**: 你的 OpenAI API Key
   - **模型**: `gpt-3.5-turbo-0125`
   - **Temperature**: 0.3 (默认)

2. 点击 **"测试连接"** 按钮

3. 等待测试结果

4. 点击 **"保存设置"**

**预期结果:**
- ✅ 测试连接成功，显示绿色提示
- ✅ 设置保存成功
- ✅ 返回主界面后，"⚠️ 未配置API" 警告消失

### 3. 右键添加单词 (核心功能)

**测试步骤:**

1. 访问任意英文网页，例如:
   - [MDN Web Docs](https://developer.mozilla.org/)
   - [Wikipedia](https://en.wikipedia.org/)

2. 在页面中选中一个单词（如 "asynchronous"）

3. 右键点击选中的文本

4. 在右键菜单中选择 **"📚 添加到词库"**

5. 查看侧边栏的变化

**预期结果:**
- ✅ 右键菜单显示 "📚 添加到词库" 选项
- ✅ 点击后，侧边栏显示 "加载中..." (如果实现了加载提示)
- ✅ 几秒后，新单词卡片出现在侧边栏
- ✅ 单词卡片包含:
  - 单词和音标
  - 词性和释义
  - 例句 (可展开)
  - 词根 (可展开)
  - "记住了" 和 "还不熟" 按钮

### 4. 单词卡片功能

**测试步骤:**

1. 在侧边栏找到刚添加的单词卡片

2. 测试以下功能:
   - 点击 🔊 发音按钮
   - 鼠标悬停查看展开的例句和词根
   - 点击 "记住了" 按钮
   - 点击 🗑️ 删除按钮

**预期结果:**
- ✅ 发音功能正常工作
- ✅ 鼠标悬停时例句和词根展开
- ✅ 点击 "记住了" 后，卡片颜色可能变化 (记忆等级提升)
- ✅ 删除确认对话框出现，确认后单词被删除

### 5. 记忆等级系统

**测试步骤:**

1. 添加多个单词到词库

2. 对不同单词进行不同的反馈:
   - 一些单词点击 "记住了"
   - 一些单词点击 "还不熟"

3. 观察单词卡片的排序和颜色

**预期结果:**
- ✅ 新添加的单词显示红色边框 (NEW)
- ✅ 点击 "记住了" 后，颜色变为橙色 (FAMILIAR)
- ✅ 继续点击 "记住了"，颜色逐渐变为黄色 (LEARNING) → 绿色 (MASTERED)
- ✅ 单词按记忆等级排序（低等级在前）

### 6. 侧边栏界面

**测试步骤:**

1. 测试侧边栏的交互功能:
   - 点击折叠按钮 (◀)
   - 点击展开按钮 (▶)
   - 点击刷新按钮

2. 查看底部统计信息

**预期结果:**
- ✅ 折叠后只显示头部
- ✅ 展开后恢复正常显示
- ✅ 刷新按钮重新加载词库
- ✅ 底部显示 "词库: X 个单词"

### 7. 设置选项

**测试步骤:**

1. 打开设置页面

2. 测试显示设置:
   - 切换 "高亮页面中的词库单词"
   - 切换 "忽略代码块中的单词"
   - 切换 "显示待复习提醒"
   - 切换 "自动播放单词发音"

3. 保存设置

**预期结果:**
- ✅ 所有开关可正常切换
- ✅ 设置保存成功
- ✅ 设置在重新打开后保持

## 常见问题排查

### 问题 1: 右键菜单没有 "📚 添加到词库" 选项

**可能原因:**
- 扩展未正确加载
- Service Worker 未启动

**解决方法:**
1. 检查 `edge://extensions/` 页面，确认扩展状态为 "已启用"
2. 点击扩展详情中的 "Service Worker" 查看日志
3. 重新加载扩展 (点击刷新按钮)
4. 刷新测试网页

### 问题 2: 点击 "添加到词库" 后没有反应

**可能原因:**
- API Key 未配置
- API 调用失败
- 网络问题

**解决方法:**
1. 打开浏览器开发者工具 (F12)
2. 查看 Console 面板的错误信息
3. 检查 Network 面板的 API 请求
4. 确认 API Key 正确配置
5. 测试 API 连接

### 问题 3: Service Worker 错误

**解决方法:**
1. 访问 `edge://extensions/`
2. 找到 Word Memo 扩展
3. 点击 "Service Worker" 链接查看日志
4. 根据错误信息排查问题

### 问题 4: 侧边栏不显示

**解决方法:**
1. 确认点击了扩展图标
2. 检查是否有错误提示
3. 重新加载扩展
4. 清除浏览器缓存

## 开发调试

### 查看 Service Worker 日志

1. 访问 `edge://extensions/`
2. 找到 Word Memo
3. 点击 "Service Worker"
4. 查看控制台输出

### 查看侧边栏日志

1. 右键点击侧边栏区域
2. 选择 "检查"
3. 查看开发者工具

### 查看 Content Script 日志

1. 在测试网页上按 F12
2. 查看 Console 面板
3. 过滤 "[Word Memo]" 消息

## 测试检查清单

- [ ] 扩展成功加载
- [ ] 设置页面可访问
- [ ] API 配置保存成功
- [ ] API 连接测试通过
- [ ] 右键菜单显示正确
- [ ] 添加单词功能正常
- [ ] 单词卡片显示完整
- [ ] 发音功能工作
- [ ] 记忆反馈功能正常
- [ ] 删除单词功能正常
- [ ] 记忆等级颜色正确
- [ ] 侧边栏折叠/展开正常
- [ ] 设置持久化正常

## 下一步

测试通过后，可以开始使用 Word Memo 学习英文词汇！

如果遇到问题，请查看:
- [README.md](./README.md) - 项目概览
- [PRD.md](./PRD.md) - 产品需求文档
- [技术实现方案.md](./技术实现方案.md) - 技术细节
