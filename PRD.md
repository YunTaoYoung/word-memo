# äº§å“éœ€æ±‚æ–‡æ¡£ (PRD) - Word Memo

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯
- **äº§å“åç§°**: Word Memo (è¯æ±‡è®°å¿†åŠ©æ‰‹)
- **ç‰ˆæœ¬**: V1.0
- **æ–‡æ¡£ç‰ˆæœ¬**: 1.0
- **åˆ›å»ºæ—¥æœŸ**: 2026-01-05
- **ç›®æ ‡å¹³å°**: Microsoft Edge æµè§ˆå™¨æ’ä»¶ (Manifest V3)

---

## ğŸ¯ äº§å“æ¦‚è¿°

### äº§å“å®šä½
ä¸€æ¬¾ä¸“ä¸ºèŒåœºæŠ€æœ¯äººå‘˜è®¾è®¡çš„**éä¾µå…¥å¼è‹±æ–‡é˜…è¯»è¾…åŠ©ä¸è¯æ±‡è®°å¿†**æµè§ˆå™¨æ’ä»¶ï¼Œé€šè¿‡æ™ºèƒ½ä¾§è¾¹æ å’ŒAIé©±åŠ¨çš„é‡Šä¹‰ç”Ÿæˆï¼Œåœ¨ä¸å¹²æ‰°åŸæ–‡é˜…è¯»çš„å‰æä¸‹ï¼Œæä¾›é«˜æ•ˆçš„è¯æ±‡å­¦ä¹ å’Œè®°å¿†ç®¡ç†ä½“éªŒã€‚

### æ ¸å¿ƒä»·å€¼ä¸»å¼ 
- âœ¨ **éä¾µå…¥å¼é˜…è¯»**: ä¿æŒåŸæ–‡å®Œæ•´æ€§ï¼Œé€šè¿‡ä¾§è¾¹æ è¾…åŠ©è€Œéç¿»è¯‘è¦†ç›–
- ğŸ¯ **ä¸»åŠ¨å¼å­¦ä¹ **: ç”¨æˆ·è‡ªä¸»é€‰æ‹©ç”Ÿè¯ï¼Œé¿å…è¢«åŠ¨æ¨é€å¹²æ‰°
- ğŸ§  **ç§‘å­¦è®°å¿†ç®¡ç†**: åŸºäºé—å¿˜æ›²çº¿çš„å¤šçº§è®°å¿†çŠ¶æ€è‡ªé€‚åº”ç³»ç»Ÿ
- ğŸ¤– **AIæ™ºèƒ½é‡Šä¹‰**: LLMç”Ÿæˆåœºæ™¯åŒ–é‡Šä¹‰ï¼Œæ”¯æŒè‡ªå®šä¹‰ç¼–è¾‘

### ç›®æ ‡ç”¨æˆ·
- **ä¸»è¦ç”¨æˆ·**: èŒåœºæŠ€æœ¯äººå‘˜ï¼ˆè½¯ä»¶å·¥ç¨‹å¸ˆã€äº§å“ç»ç†ç­‰ï¼‰
- **ä½¿ç”¨åœºæ™¯**: é˜…è¯»è‹±æ–‡æŠ€æœ¯æ–‡æ¡£ã€GitHubé¡¹ç›®ã€æŠ€æœ¯åšå®¢ã€Stack Overflowç­‰
- **æ ¸å¿ƒç—›ç‚¹**:
  - é˜…è¯»è¢«é¢‘ç¹æŸ¥è¯æ‰“æ–­ï¼Œä½“éªŒå‰²è£‚
  - é‡å¤é‡åˆ°çš„ç”Ÿè¯è®°ä¸ä½ï¼Œæ¯æ¬¡éƒ½è¦æŸ¥
  - ç°æœ‰ç¿»è¯‘æ’ä»¶è¿‡äºä¾µå…¥ï¼Œç ´ååŸæ–‡é˜…è¯»æµç•…æ€§

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

### æŠ€æœ¯æ ˆ
| åˆ†ç±» | æŠ€æœ¯é€‰å‹ | ç†ç”± |
|------|----------|------|
| **æ¡†æ¶** | React 18 + TypeScript | ç±»å‹å®‰å…¨ + ç»„ä»¶åŒ–å¼€å‘ |
| **æ„å»ºå·¥å…·** | Vite | å¿«é€Ÿçƒ­æ›´æ–°ï¼Œé€‚åˆæ’ä»¶å¼€å‘ |
| **çŠ¶æ€ç®¡ç†** | Zustand | è½»é‡çº§ï¼Œé¿å…Reduxå¤æ‚åº¦ |
| **æ ·å¼æ–¹æ¡ˆ** | Tailwind CSS | å¿«é€Ÿå¼€å‘ + ä¸»é¢˜åˆ‡æ¢ |
| **UIç»„ä»¶åº“** | Shadcn/ui | é«˜è´¨é‡ç»„ä»¶ + å¯å®šåˆ¶ |
| **æ’ä»¶API** | Chrome Extension API (Manifest V3) | Edgeå…¼å®¹ |
| **å­˜å‚¨** | chrome.storage.local | æœ¬åœ°æŒä¹…åŒ– |
| **LLMé›†æˆ** | OpenAI API å…¼å®¹æ¥å£ | ä¸ç»‘å®šä¾›åº”å•†ï¼Œæ¨ègpt-3.5-turbo-0125 |
| **æ–‡æœ¬å¤„ç†** | compromise.js | è¯å½¢è¿˜åŸï¼ˆrunningâ†’runï¼‰ |
| **æ¨¡ç³Šæœç´¢** | Fuse.js | è½»é‡çº§æ¨¡ç³ŠåŒ¹é… |

### æ’ä»¶æ¶æ„ç»„ä»¶
```
word-memo/
â”œâ”€â”€ manifest.json              # Manifest V3é…ç½®
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ background/            # Service Worker
â”‚   â”‚   â””â”€â”€ service-worker.ts  # åå°æœåŠ¡ï¼ˆAPIè°ƒç”¨ã€å­˜å‚¨ç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ content/               # Content Script
â”‚   â”‚   â”œâ”€â”€ scanner.ts         # é¡µé¢æ‰«æå™¨ï¼ˆå®æ—¶æ£€æµ‹è¯åº“å•è¯ï¼‰
â”‚   â”‚   â”œâ”€â”€ highlighter.ts     # å•è¯é«˜äº®æ¸²æŸ“
â”‚   â”‚   â””â”€â”€ viewport-tracker.ts # å¯è§†åŒºåŸŸè¿½è¸ª
â”‚   â”œâ”€â”€ sidepanel/             # ä¾§è¾¹æ UI
â”‚   â”‚   â”œâ”€â”€ App.tsx            # ä¸»åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ WordCard.tsx   # å•è¯å¡ç‰‡
â”‚   â”‚   â”‚   â”œâ”€â”€ VocabBrowser.tsx # è¯åº“æµè§ˆ
â”‚   â”‚   â”‚   â””â”€â”€ Settings.tsx   # è®¾ç½®é¡µ
â”‚   â”‚   â””â”€â”€ hooks/
â”‚   â”‚       â”œâ”€â”€ useWordStore.ts # è¯åº“çŠ¶æ€ç®¡ç†
â”‚   â”‚       â””â”€â”€ useLLM.ts      # LLMè°ƒç”¨Hook
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ memory-algorithm.ts # é—å¿˜æ›²çº¿ç®—æ³•
â”‚   â”‚   â”œâ”€â”€ llm-client.ts      # LLM APIå®¢æˆ·ç«¯
â”‚   â”‚   â””â”€â”€ storage.ts         # å­˜å‚¨æŠ½è±¡å±‚
â”‚   â””â”€â”€ types/
â”‚       â””â”€â”€ index.ts           # å…¨å±€ç±»å‹å®šä¹‰
â””â”€â”€ public/
    â”œâ”€â”€ icons/                 # æ’ä»¶å›¾æ ‡
    â””â”€â”€ _locales/              # å›½é™…åŒ–ï¼ˆå¯é€‰ï¼‰
```

---

## ğŸ“¦ æ ¸å¿ƒåŠŸèƒ½æ¨¡å—

### 1. è¯æ±‡ç®¡ç†ç³»ç»Ÿ

#### 1.1 æ·»åŠ å•è¯åˆ°è¯åº“
**è§¦å‘æ–¹å¼**: ç”¨æˆ·åœ¨é¡µé¢ä¸­é€‰ä¸­å•è¯ â†’ å³é”®èœå• â†’ "æ·»åŠ åˆ°è¯åº“"

**æµç¨‹**:
1. ç”¨æˆ·é€‰ä¸­å•è¯ï¼ˆå¦‚ "ephemeral"ï¼‰
2. å³é”®èœå•æ˜¾ç¤º "ğŸ“š æ·»åŠ åˆ°è¯åº“" é€‰é¡¹
3. ç‚¹å‡»åè§¦å‘LLMç”Ÿæˆæµç¨‹
4. ä¾§è¾¹æ æ˜¾ç¤ºLoadingçŠ¶æ€å¡ç‰‡
5. LLMè¿”å›åæ˜¾ç¤ºå®Œæ•´å¡ç‰‡
6. é¡µé¢ä¸­è¯¥å•è¯ç«‹å³é«˜äº®ï¼ˆçº¢è‰²æ³¢æµªä¸‹åˆ’çº¿ï¼‰

**ä¸šåŠ¡è§„åˆ™**:
- âœ… å•è¯å»é‡ï¼šå·²å­˜åœ¨è¯åº“ä¸­çš„å•è¯ä¸å¯é‡å¤æ·»åŠ 
- âœ… å¤§å°å†™ä¸æ•æ„Ÿï¼š`Async` å’Œ `async` è§†ä¸ºåŒä¸€å•è¯
- âœ… å³æ—¶åé¦ˆï¼šæ˜¾ç¤ºToastæç¤º "æ­£åœ¨æ·»åŠ ..." â†’ "æ·»åŠ æˆåŠŸ"
- âŒ æš‚ä¸æ”¯æŒï¼šæ‰¹é‡æ·»åŠ ã€æ·»åŠ æ’¤é”€

**é”™è¯¯å¤„ç†**:
| é”™è¯¯ç±»å‹ | æç¤ºä¿¡æ¯ | æ“ä½œ |
|----------|----------|------|
| å•è¯å·²å­˜åœ¨ | "è¯¥å•è¯å·²åœ¨è¯åº“ä¸­" | æ˜¾ç¤ºToast 2ç§’ |
| æœªé€‰ä¸­å•è¯ | "è¯·å…ˆé€‰ä¸­è¦æ·»åŠ çš„å•è¯" | å³é”®èœå•ç½®ç° |
| LLMç”Ÿæˆå¤±è´¥ | è§ [1.2 LLMé›†æˆ] | æ˜¾ç¤ºé‡è¯•æŒ‰é’® |

#### 1.2 LLMé‡Šä¹‰ç”Ÿæˆ

**é…ç½®é¡¹**ï¼ˆç”¨æˆ·åœ¨è®¾ç½®é¡µé…ç½®ï¼‰:
```typescript
interface LLMConfig {
  apiEndpoint: string;    // é»˜è®¤: https://api.openai.com/v1/chat/completions
  apiKey: string;         // ç”¨æˆ·è‡ªè¡Œé…ç½®
  model: string;          // é»˜è®¤: gpt-3.5-turbo-0125ï¼ˆæ¨èï¼‰
  temperature: number;    // é»˜è®¤: 0.3ï¼ˆç¨³å®šè¾“å‡ºï¼‰
  timeout: number;        // é»˜è®¤: 30000ms
}

/**
 * LLMæœåŠ¡å•†çµæ´»æ€§è¯´æ˜ï¼š
 * - ä¸ç»‘å®šç‰¹å®šä¾›åº”å•†ï¼Œä»»ä½•å…¼å®¹OpenAI APIæ ¼å¼çš„æœåŠ¡å‡å¯ä½¿ç”¨
 * - æ”¯æŒï¼šOpenAIã€Azure OpenAIã€å›½å†…å¤§æ¨¡å‹å‚å•†ï¼ˆå¦‚æ™ºè°±ã€ç™¾å·ã€DeepSeekç­‰ï¼‰
 * - æ¨èæ¨¡å‹ï¼šgpt-3.5-turbo-0125ï¼ˆæ€§ä»·æ¯”æœ€ä¼˜ï¼Œå“åº”å¿«ï¼‰
 * - ç”¨æˆ·å¯åœ¨è®¾ç½®é¡µè‡ªç”±é…ç½®APIç«¯ç‚¹å’Œæ¨¡å‹åç§°
 */
```

**Promptæ¨¡æ¿**:
```typescript
const SYSTEM_PROMPT = `ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„è‹±è¯­è¯æ±‡æ•™å­¦åŠ©æ‰‹ï¼Œä¸“æ³¨äºæŠ€æœ¯æ–‡æ¡£åœºæ™¯ã€‚è¯·ä¸ºç»™å®šå•è¯ç”Ÿæˆç»“æ„åŒ–é‡Šä¹‰ã€‚`;

const USER_PROMPT = `
è¯·ä¸ºå•è¯ "{word}" ç”Ÿæˆä»¥ä¸‹å†…å®¹ï¼Œä»¥JSONæ ¼å¼è¿”å›ï¼š

{
  "word": "å•è¯åŸæ–‡ï¼ˆå°å†™ï¼‰",
  "phonetic": "è‹±å¼éŸ³æ ‡ï¼ˆå¦‚ /ÉªËˆfem.É™r.É™l/ï¼‰",
  "definitions": [
    {
      "pos": "è¯æ€§ï¼ˆn./v./adj./adv.ç­‰ï¼‰",
      "meaning": "ä¸­æ–‡é‡Šä¹‰ï¼ˆç®€æ´ï¼Œ15å­—ä»¥å†…ï¼‰"
    }
  ],
  "examples": [
    {
      "en": "è‹±æ–‡ä¾‹å¥ï¼ˆä¼˜å…ˆæŠ€æœ¯åœºæ™¯ï¼‰",
      "zh": "ä¸­æ–‡ç¿»è¯‘"
    }
  ],
  "etymology": "è¯æ ¹è¯ç¼€è§£é‡Šï¼ˆå¦‚ï¼šepi-åœ¨...ä¹‹ä¸Š + hemer-æ—¥ + al-å½¢å®¹è¯åç¼€ï¼Œæ„ä¸º'åªæŒç»­ä¸€å¤©çš„'ï¼‰ã€‚å¦‚æ— æ˜ç¡®è¯æ ¹ï¼Œè¿”å›ç©ºå­—ç¬¦ä¸²ã€‚"
}

è¦æ±‚ï¼š
1. definitionsæ•°ç»„åŒ…å«æ‰€æœ‰å¸¸è§è¯æ€§å’Œé‡Šä¹‰ï¼ˆæœ€å¤š3ä¸ªï¼‰
2. examplesæ•°ç»„åŒ…å«2-3ä¸ªä¾‹å¥ï¼Œä¼˜å…ˆä½¿ç”¨ç¼–ç¨‹/æŠ€æœ¯ç›¸å…³ä¾‹å¥
3. é‡Šä¹‰ç®€æ´ä¸“ä¸šï¼Œé¿å…å†—é•¿è§£é‡Š
4. ä¾‹å¥éš¾åº¦é€‚ä¸­ï¼Œè´´è¿‘å®é™…ä½¿ç”¨åœºæ™¯
`;
```

**ç”Ÿæˆæµç¨‹**:
```
1. ç”¨æˆ·æ·»åŠ å•è¯
2. Content Script â†’ Background Service Worker
3. Service Workerè°ƒç”¨LLM APIï¼ˆå¼‚æ­¥ï¼‰
4. è¶…æ—¶30ç§’è‡ªåŠ¨å¤±è´¥
5. æˆåŠŸï¼šè§£æJSON â†’ å­˜å‚¨åˆ°chrome.storage.local
6. å¤±è´¥ï¼šè¿”å›é”™è¯¯ä¿¡æ¯ â†’ æ˜¾ç¤ºé‡è¯•æŒ‰é’®
```

**é”™è¯¯å¤„ç†**:
| é”™è¯¯ç±»å‹ | UIå±•ç¤º | å¯æ“ä½œ |
|----------|--------|--------|
| ç½‘ç»œé”™è¯¯ | "âš ï¸ ç½‘ç»œè¿æ¥å¤±è´¥" | [é‡è¯•] æŒ‰é’® |
| API Keyæ— æ•ˆ | "âš ï¸ API Keyæ— æ•ˆï¼Œè¯·æ£€æŸ¥è®¾ç½®" | [å»è®¾ç½®] é“¾æ¥ |
| è¯·æ±‚è¶…æ—¶ | "âš ï¸ è¯·æ±‚è¶…æ—¶ï¼ˆ30sï¼‰" | [é‡è¯•] æŒ‰é’® |
| å“åº”æ ¼å¼é”™è¯¯ | "âš ï¸ æ•°æ®è§£æå¤±è´¥" | [é‡è¯•] + [ç¼–è¾‘] |
| é¢‘ç‡é™åˆ¶ | "âš ï¸ è¯·æ±‚è¿‡äºé¢‘ç¹ï¼Œè¯·ç¨åå†è¯•" | å€’è®¡æ—¶60s |

**æˆæœ¬ä¼°ç®—**ï¼ˆä»¥æ¨èæ¨¡å‹ gpt-3.5-turbo-0125 ä¸ºä¾‹ï¼‰:
- å®šä»·ï¼š$0.0005/1K input tokensï¼Œ$0.0015/1K output tokens
- é¢„ä¼°å•è¯é‡Šä¹‰æ¶ˆè€—ï¼š~200 input + ~300 output tokens
- å•æ¬¡ç”Ÿæˆæˆæœ¬ï¼šçº¦ $0.0005/å•è¯
- 1000ä¸ªå•è¯æ€»æˆæœ¬ï¼šçº¦ $0.5

**å¤‡æ³¨**ï¼šå®é™…æˆæœ¬å› æœåŠ¡å•†è€Œå¼‚ï¼Œç”¨æˆ·å¯é€‰æ‹©æ›´ç»æµçš„å›½å†…å¤§æ¨¡å‹æœåŠ¡ï¼ˆå¦‚DeepSeekã€æ™ºè°±ç­‰ï¼‰

#### 1.3 ç¼–è¾‘å•è¯é‡Šä¹‰

**è§¦å‘**: å•è¯å¡ç‰‡ä¸Šçš„ âœï¸ ç¼–è¾‘æŒ‰é’®

**ç¼–è¾‘ç•Œé¢**ï¼ˆå¼¹çª—å½¢å¼ï¼‰:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç¼–è¾‘å•è¯: ephemeral        [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ éŸ³æ ‡: /ÉªËˆfem.É™r.É™l/            â”‚
â”‚                                 â”‚
â”‚ é‡Šä¹‰:                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ adj. çŸ­æš‚çš„ï¼›ç¬æ¯çš„          â”‚â”‚
â”‚ â”‚ n. çŸ­ç”Ÿæ¤ç‰©                  â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚ ä¾‹å¥:                           â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ 1. Ephemeral storage lasts  â”‚â”‚
â”‚ â”‚    only during execution.   â”‚â”‚
â”‚ â”‚    ä¸´æ—¶å­˜å‚¨ä»…åœ¨æ‰§è¡ŒæœŸé—´æœ‰æ•ˆ â”‚â”‚
â”‚ â”‚                              â”‚â”‚
â”‚ â”‚ [+ æ·»åŠ ä¾‹å¥]                 â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚ è¯æ ¹: epi-(åœ¨...ä¹‹ä¸Š) + hemer- â”‚
â”‚       (æ—¥) + al-(å½¢å®¹è¯åç¼€)   â”‚
â”‚                                 â”‚
â”‚        [å–æ¶ˆ]  [ä¿å­˜]           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸šåŠ¡è§„åˆ™**:
- âœ… æ‰€æœ‰å­—æ®µå¯ç¼–è¾‘
- âœ… å®æ—¶ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
- âœ… ä¿å­˜åå¡ç‰‡ç«‹å³æ›´æ–°
- âŒ æ— ç‰ˆæœ¬å†å²è®°å½•

#### 1.4 åˆ é™¤å•è¯

**è§¦å‘**: å•è¯å¡ç‰‡ä¸Šçš„ ğŸ—‘ï¸ åˆ é™¤æŒ‰é’®

**ç¡®è®¤å¼¹çª—**:
```
ç¡®å®šåˆ é™¤å•è¯ "ephemeral"ï¼Ÿ
è¯¥æ“ä½œä¸å¯æ’¤é”€ã€‚

å­¦ä¹ æ•°æ®ï¼š
- æ·»åŠ æ—¶é—´: 2026-01-03
- å¤ä¹ æ¬¡æ•°: 5æ¬¡
- å½“å‰çŠ¶æ€: LEARNING

    [å–æ¶ˆ]  [ç¡®å®šåˆ é™¤]
```

**ä¸šåŠ¡è§„åˆ™**:
- âœ… äºŒæ¬¡ç¡®è®¤é˜²æ­¢è¯¯åˆ 
- âœ… åˆ é™¤åé¡µé¢é«˜äº®ç«‹å³æ¶ˆå¤±
- âœ… ä¾§è¾¹æ å¡ç‰‡æ·¡å‡ºåŠ¨ç”»
- âŒ æ— å›æ”¶ç«™/æ’¤é”€åŠŸèƒ½

---

### 2. è®°å¿†çŠ¶æ€ç®¡ç†ç³»ç»Ÿ

#### 2.1 å¤šçº§è®°å¿†æ¨¡å‹

**çŠ¶æ€å®šä¹‰**:
```typescript
enum MemoryLevel {
  NEW = 0,        // æ–°è¯ï¼ˆå®Œå…¨é™Œç”Ÿï¼‰
  FAMILIAR = 1,   // æœ‰å°è±¡ï¼ˆè§è¿‡1-2æ¬¡ï¼‰
  LEARNING = 2,   // å­¦ä¹ ä¸­ï¼ˆè§è¿‡3-5æ¬¡ï¼‰
  MASTERED = 3,   // å·²æŒæ¡ï¼ˆè§è¿‡6+æ¬¡ï¼‰
  ARCHIVED = 4    // å·²å½’æ¡£ï¼ˆé•¿æœŸæŒæ¡ï¼Œä¸å†æ˜¾ç¤ºï¼‰
}

interface WordMemoryState {
  word: string;                  // å•è¯åŸæ–‡ï¼ˆå°å†™ï¼‰
  level: MemoryLevel;            // å½“å‰è®°å¿†ç­‰çº§
  reviewCount: number;           // æ€»å¤ä¹ æ¬¡æ•°
  correctCount: number;          // ç‚¹å‡»"è®°ä½"çš„æ¬¡æ•°
  lastReviewDate: Date;          // ä¸Šæ¬¡å¤ä¹ æ—¶é—´
  nextReviewDate: Date;          // ä¸‹æ¬¡å¤ä¹ æ—¶é—´ï¼ˆåŸºäºé—å¿˜æ›²çº¿ï¼‰
  addedDate: Date;               // æ·»åŠ åˆ°è¯åº“çš„æ—¶é—´
  lastSeenDate: Date;            // æœ€åä¸€æ¬¡åœ¨é¡µé¢ä¸­å‡ºç°çš„æ—¶é—´
}
```

#### 2.2 é—å¿˜æ›²çº¿ç®—æ³•

**æ ¸å¿ƒç®—æ³•**ï¼ˆåŸºäºSuperMemo SM-2ç®€åŒ–ç‰ˆï¼‰:
```typescript
/**
 * è®¡ç®—ä¸‹æ¬¡å¤ä¹ æ—¶é—´
 * @param currentLevel å½“å‰è®°å¿†ç­‰çº§
 * @param isRemembered ç”¨æˆ·æ˜¯å¦ç‚¹å‡»"è®°ä½äº†"
 * @returns ä¸‹æ¬¡å¤ä¹ çš„æ—¶é—´æˆ³
 */
function calculateNextReview(
  currentLevel: MemoryLevel,
  isRemembered: boolean
): Date {
  // å¤ä¹ é—´éš”ï¼ˆå¤©ï¼‰
  const intervals: Record<MemoryLevel, { yes: number; no: number }> = {
    [MemoryLevel.NEW]:      { yes: 1,  no: 0.5 },  // è®°ä½â†’1å¤©åï¼Œä¸ç†Ÿâ†’12å°æ—¶å
    [MemoryLevel.FAMILIAR]: { yes: 3,  no: 1 },    // è®°ä½â†’3å¤©åï¼Œä¸ç†Ÿâ†’1å¤©å
    [MemoryLevel.LEARNING]: { yes: 7,  no: 3 },    // è®°ä½â†’7å¤©åï¼Œä¸ç†Ÿâ†’3å¤©å
    [MemoryLevel.MASTERED]: { yes: 30, no: 7 },    // è®°ä½â†’30å¤©åï¼Œä¸ç†Ÿâ†’7å¤©å
    [MemoryLevel.ARCHIVED]: { yes: 90, no: 30 },   // è®°ä½â†’90å¤©åï¼Œä¸ç†Ÿâ†’30å¤©å
  };

  const days = isRemembered
    ? intervals[currentLevel].yes
    : intervals[currentLevel].no;

  return new Date(Date.now() + days * 24 * 60 * 60 * 1000);
}

/**
 * å‡çº§è®°å¿†ç­‰çº§
 * @param currentLevel å½“å‰ç­‰çº§
 * @returns æ–°ç­‰çº§
 */
function upgradeLevel(currentLevel: MemoryLevel): MemoryLevel {
  if (currentLevel >= MemoryLevel.ARCHIVED) return MemoryLevel.ARCHIVED;
  return currentLevel + 1;
}

/**
 * æ£€æŸ¥æ˜¯å¦éœ€è¦é™çº§ï¼ˆé—å¿˜æœºåˆ¶ï¼‰
 * @param word å•è¯è®°å¿†çŠ¶æ€
 * @returns æ˜¯å¦éœ€è¦é™çº§
 */
function shouldDowngrade(word: WordMemoryState): boolean {
  const now = Date.now();
  const nextReview = word.nextReviewDate.getTime();
  const overdueThreshold = 1.5; // è¶…è¿‡å¤ä¹ æ—¶é—´çš„1.5å€

  return now > nextReview * overdueThreshold;
}

/**
 * é™çº§è®°å¿†ç­‰çº§
 */
function downgradeLevel(currentLevel: MemoryLevel): MemoryLevel {
  if (currentLevel <= MemoryLevel.NEW) return MemoryLevel.NEW;
  return currentLevel - 1;
}
```

#### 2.3 è®°å¿†åé¦ˆæœºåˆ¶

**UIäº¤äº’**:
```
å•è¯å¡ç‰‡åº•éƒ¨ï¼š
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ephemeral                       â”‚
â”‚ adj. çŸ­æš‚çš„                     â”‚
â”‚                                 â”‚
â”‚ â“ æ˜¯å¦è®°ä½äº†è¿™ä¸ªå•è¯ï¼Ÿ          â”‚
â”‚    [è®°ä½äº† âœ“]  [è¿˜ä¸ç†Ÿ Ã—]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ç‚¹å‡»"è®°ä½äº†"**:
```typescript
function handleRemembered(word: WordMemoryState) {
  word.correctCount++;
  word.reviewCount++;
  word.level = upgradeLevel(word.level); // ç­‰çº§+1
  word.lastReviewDate = new Date();
  word.nextReviewDate = calculateNextReview(word.level, true);

  // è§¦å‘UIæ›´æ–°ï¼šé¢œè‰²å˜åŒ– + å¡ç‰‡åŠ¨ç”» + é‡æ–°æ’åº
  updateWordStyle(word);
  playUpgradeAnimation(word); // ç»¿è‰²é—ªçƒ + è½»å¾®ç¼©å°
  reorderSidebar(); // å¡ç‰‡ä¸‹ç§»
}
```

**ç‚¹å‡»"è¿˜ä¸ç†Ÿ"**:
```typescript
function handleNotRemembered(word: WordMemoryState) {
  word.reviewCount++;
  // ç­‰çº§ä¸å˜ï¼Œä½†æ›´æ–°å¤ä¹ æ—¶é—´
  word.lastReviewDate = new Date();
  word.nextReviewDate = calculateNextReview(word.level, false);

  // è§¦å‘UIæ›´æ–°
  updateWordStyle(word);
  playRetryAnimation(word); // çº¢è‰²è„‰å†²æ•ˆæœ
}
```

#### 2.4 è‡ªåŠ¨é™çº§æœºåˆ¶

**åå°å®šæ—¶æ£€æŸ¥**ï¼ˆæ¯30åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼‰:
```typescript
// åœ¨ Service Worker ä¸­æ‰§è¡Œ
chrome.alarms.create('checkMemoryDecay', { periodInMinutes: 30 });

chrome.alarms.onAlarm.addListener((alarm) => {
  if (alarm.name === 'checkMemoryDecay') {
    const allWords = await getVocabulary();

    allWords.forEach(word => {
      if (shouldDowngrade(word)) {
        word.level = downgradeLevel(word.level);
        word.nextReviewDate = calculateNextReview(word.level, false);
        saveWord(word);

        // å¦‚æœè¯¥å•è¯å½“å‰æ­£åœ¨ä¾§è¾¹æ æ˜¾ç¤ºï¼Œè§¦å‘æ ·å¼æ›´æ–°
        notifyContentScript('updateWordStyle', { word });
      }
    });
  }
});
```

#### 2.5 è§†è§‰å·®å¼‚æ˜ å°„

| è®°å¿†ç­‰çº§ | é¢œè‰² | å¡ç‰‡æ ·å¼ | ä¸‹åˆ’çº¿æ ·å¼ | æ’åºæƒé‡ | ä¾‹å¥é»˜è®¤å±•å¼€ |
|----------|------|----------|------------|----------|--------------|
| **NEW**<br>(æ–°è¯) | `#EF4444`<br>çº¢è‰² | å¤§å¡ç‰‡<br>h=120px<br>ç²—è¾¹æ¡†3px | æ³¢æµªä¸‹åˆ’çº¿<br>2px | 100 | âœ… é»˜è®¤å±•å¼€ |
| **FAMILIAR**<br>(æœ‰å°è±¡) | `#F59E0B`<br>æ©™è‰² | ä¸­ç­‰å¡ç‰‡<br>h=100px<br>è¾¹æ¡†2px | å®çº¿ä¸‹åˆ’çº¿<br>2px | 75 | âŒ æ‚¬æµ®å±•å¼€ |
| **LEARNING**<br>(å­¦ä¹ ä¸­) | `#EAB308`<br>é»„è‰² | ä¸­ç­‰å¡ç‰‡<br>h=100px<br>è¾¹æ¡†1.5px | è™šçº¿ä¸‹åˆ’çº¿<br>1.5px | 50 | âŒ æ‚¬æµ®å±•å¼€ |
| **MASTERED**<br>(å·²æŒæ¡) | `#22C55E`<br>ç»¿è‰² | å°å¡ç‰‡<br>h=70px<br>è¾¹æ¡†1px | ç‚¹çŠ¶ä¸‹åˆ’çº¿<br>1px | 25 | âŒ ç‚¹å‡»å±•å¼€ |
| **ARCHIVED**<br>(å·²å½’æ¡£) | `#9CA3AF`<br>ç°è‰² | æå°å¡ç‰‡<br>h=50px<br>æ— è¾¹æ¡† | æ— ä¸‹åˆ’çº¿ | 0 | âŒ ä¸æ˜¾ç¤º |

**é¢œè‰²æ¸å˜åŠ¨ç”»**:
```css
/* ç­‰çº§å‡çº§æ—¶çš„è¿‡æ¸¡æ•ˆæœ */
.word-card {
  transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

/* å‡çº§åŠ¨ç”» */
@keyframes levelUp {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); box-shadow: 0 0 20px currentColor; }
  100% { transform: scale(1); }
}
```

---

### 2.5 ç»ƒä¹ æ¨¡å¼ç³»ç»Ÿï¼ˆV1.1æ–°å¢ï¼‰

#### 2.5.1 ç»ƒä¹ å…¥å£ä¸æµç¨‹

**è§¦å‘æ–¹å¼**: è¯åº“ç®¡ç†Tab â†’ "å¼€å§‹ç»ƒä¹ "æŒ‰é’®

**ç»ƒä¹ ç•Œé¢**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç»ƒä¹  (3/5)          æ­£ç¡®: 2    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  "ephemeral" åœ¨ä»¥ä¸‹å“ªä¸ªåœºæ™¯ä¸­   â”‚
â”‚  ä½¿ç”¨æœ€åˆé€‚ï¼Ÿ                    â”‚
â”‚                                 â”‚
â”‚  [A] æ°¸ä¹…å­˜å‚¨çš„æ•°æ®              â”‚
â”‚  [B] ä¸´æ—¶å­˜å‚¨çš„æ•°æ®              â”‚
â”‚  [C] åŠ å¯†å­˜å‚¨çš„æ•°æ®              â”‚
â”‚  [D] åˆ†å¸ƒå¼å­˜å‚¨çš„æ•°æ®            â”‚
â”‚                                 â”‚
â”‚  âœ… æ­£ç¡®ï¼                       â”‚
â”‚  æ­£ç¡®ç­”æ¡ˆ: B                     â”‚
â”‚  ephemeral æ„ä¸º"çŸ­æš‚çš„ã€ç¬æ¯çš„"ï¼Œ â”‚
â”‚  é€šå¸¸ç”¨äºæè¿°ä¸´æ—¶å­˜å‚¨æˆ–çŸ­æœŸæœ‰æ•ˆ   â”‚
â”‚  çš„å†…å®¹ã€‚                        â”‚
â”‚                                 â”‚
â”‚                    [ä¸‹ä¸€é¢˜]     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ä¸šåŠ¡è§„åˆ™**:
- âœ… æ¯æ¬¡ç»ƒä¹ æœ€å¤š5é“é€‰æ‹©é¢˜
- âœ… ä¼˜å…ˆé€‰æ‹©è¿‡æœŸå•è¯ï¼ˆè¶…è¿‡å¤ä¹ æ—¶é—´ï¼‰
- âœ… 24å°æ—¶å†…å³å°†è¿‡æœŸçš„å•è¯æ¬¡ä¹‹
- âœ… ç­”å¯¹å·²è¿‡æœŸå•è¯å¯å‡çº§
- âœ… ç­”é”™ç›´æ¥é™çº§
- âœ… é¢˜ç›®ç¼“å­˜24å°æ—¶ï¼Œé¿å…é‡å¤ç”Ÿæˆ

#### 2.5.2 æ™ºèƒ½é€‰é¢˜ç®—æ³•

```typescript
/**
 * ä¸ºç»ƒä¹ é€‰æ‹©å•è¯ï¼ˆæœ€å¤š5ä¸ªï¼‰
 * ä¼˜å…ˆçº§ï¼š
 * 1. å·²è¿‡æœŸå•è¯ï¼ˆä¼˜å…ˆæœ€ä¹…æ²¡å¤ä¹ çš„ï¼‰
 * 2. 24å°æ—¶å†…å³å°†è¿‡æœŸå•è¯
 * 3. æ­£å¸¸å¤ä¹ æœŸå†…å•è¯
 * 4. æ–°è¯ä¼˜å…ˆ
 */
function selectWordsForPractice(vocabulary: WordData[]): WordData[] {
  const now = Date.now();
  const EXPIRING_HOURS_THRESHOLD = 24;

  const candidates = vocabulary
    .filter(w => w.memoryState.level < MemoryLevel.ARCHIVED)
    .map(w => {
      const nextReview = new Date(w.memoryState.nextReviewDate).getTime();
      const overdueHours = (now - nextReview) / (1000 * 60 * 60);

      let priority: number;
      if (overdueHours > 0) {
        priority = 0; // å·²è¿‡æœŸ - æœ€é«˜ä¼˜å…ˆçº§
      } else if (overdueHours > -EXPIRING_HOURS_THRESHOLD) {
        priority = 1; // 24å°æ—¶å†…åˆ°æœŸ
      } else {
        priority = 2; // æ­£å¸¸å¤ä¹ æœŸ
      }

      // æ–°è¯ï¼ˆä»æœªå¤ä¹ ï¼‰åœ¨åŒç»„ä¸­ä¼˜å…ˆ
      if (w.memoryState.reviewCount === 0) {
        priority -= 0.5;
      }

      return { word: w.word, data: w, priority, overdueHours };
    });

  // æŒ‰ä¼˜å…ˆçº§æ’åº
  candidates.sort((a, b) => {
    if (a.priority !== b.priority) return a.priority - b.priority;
    return a.overdueHours - b.overdueHours;
  });

  return candidates.slice(0, 5).map(c => c.data);
}
```

#### 2.5.3 é¢˜ç›®ç”Ÿæˆï¼ˆLLMï¼‰

**Promptæ¨¡æ¿**:
```typescript
const PRACTICE_PROMPT = `
è¯·ä¸ºå•è¯ "{word}" ç”Ÿæˆä¸€é“é€‰æ‹©é¢˜ã€‚

è¦æ±‚ï¼š
1. åŸºäºä»¥ä¸‹é‡Šä¹‰å’Œä¾‹å¥ç”Ÿæˆé¢˜ç›®
2. é¢˜å¹²æè¿°ä¸€ä¸ªåœºæ™¯ï¼Œè®©ç”¨æˆ·é€‰æ‹©æœ€åˆé€‚çš„å•è¯ç”¨æ³•
3. æä¾›4ä¸ªé€‰é¡¹ï¼ˆAã€Bã€Cã€Dï¼‰ï¼Œå…¶ä¸­1ä¸ªæ­£ç¡®ï¼Œ3ä¸ªå¹²æ‰°é¡¹
4. å¹²æ‰°é¡¹åº”è¯¥æ˜¯è¯­ä¹‰ç›¸è¿‘ä½†å«ä¹‰ä¸åŒçš„è¯æ±‡

é‡Šä¹‰ï¼š
{definitions}

ä¾‹å¥ï¼š
{examples}

è¯·ä»¥JSONæ ¼å¼è¿”å›ï¼š
{
  "question": "é¢˜ç›®é¢˜å¹²",
  "options": ["é€‰é¡¹A", "é€‰é¡¹B", "é€‰é¡¹C", "é€‰é¡¹D"],
  "correctAnswer": "æ­£ç¡®é€‰é¡¹",
  "explanation": "ç­”æ¡ˆè§£æ"
}
`;
```

#### 2.5.4 ç»ƒä¹ çŠ¶æ€æ›´æ–°

**ç­”é¢˜è§„åˆ™**:
| ç­”é¢˜æƒ…å†µ | å•è¯ç­‰çº§ | å¤ä¹ æ—¶é—´ |
|----------|----------|----------|
| ç­”å¯¹ + å·²è¿‡æœŸ | å‡çº§ | æ¨è¿Ÿ |
| ç­”å¯¹ + æœªè¿‡æœŸ | ä¸å˜ | ä¸å˜ |
| ç­”é”™ | é™çº§ | æå‰ |

---

### 3. é¡µé¢æ‰«æä¸é«˜äº®ç³»ç»Ÿ

#### 3.1 å®æ—¶æ‰«ææœºåˆ¶

**æ‰«æè§¦å‘æ¡ä»¶**:
1. é¡µé¢åŠ è½½å®Œæˆï¼ˆDOMContentLoadedï¼‰
2. ç”¨æˆ·æ»šåŠ¨é¡µé¢ï¼ˆDebounce 200msï¼‰
3. é¡µé¢DOMåŠ¨æ€æ›´æ–°ï¼ˆMutationObserverï¼‰
4. ç”¨æˆ·æ·»åŠ æ–°å•è¯åˆ°è¯åº“

**æ‰«ææµç¨‹**:
```typescript
// Content Script - scanner.ts

class VocabularyScanner {
  private vocabulary: Set<string>; // è¯åº“å•è¯é›†åˆï¼ˆå°å†™ï¼‰
  private visibleWords: Map<string, Element[]>; // å¯è§†åŒºåŸŸå†…çš„å•è¯å…ƒç´ 

  /**
   * åˆå§‹åŒ–æ‰«æå™¨
   */
  async init() {
    // 1. ä»chrome.storageåŠ è½½è¯åº“
    this.vocabulary = await loadVocabulary();

    // 2. ç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼ˆDebounceä¼˜åŒ–ï¼‰
    window.addEventListener('scroll', debounce(this.scanViewport, 200));

    // 3. ç›‘å¬DOMå˜åŒ–
    const observer = new MutationObserver(this.handleDOMMutation);
    observer.observe(document.body, {
      childList: true,
      subtree: true
    });

    // 4. æ‰§è¡Œé¦–æ¬¡æ‰«æ
    this.scanViewport();
  }

  /**
   * æ‰«æå½“å‰å¯è§†åŒºåŸŸ
   */
  scanViewport() {
    // 1. è·å–å¯è§†åŒºåŸŸè¾¹ç•Œ
    const viewportTop = window.scrollY;
    const viewportBottom = viewportTop + window.innerHeight;

    // 2. æ‰©å±•æ‰«æèŒƒå›´ï¼ˆä¸Šä¸‹å„1å±ï¼Œæå‡æµç•…æ€§ï¼‰
    const scanTop = Math.max(0, viewportTop - window.innerHeight);
    const scanBottom = viewportBottom + window.innerHeight;

    // 3. æå–å¯è§†åŒºåŸŸå†…çš„æ–‡æœ¬èŠ‚ç‚¹
    const textNodes = this.getTextNodesInRange(scanTop, scanBottom);

    // 4. åœ¨Web Workerä¸­å¤„ç†æ–‡æœ¬åŒ¹é…ï¼ˆé¿å…é˜»å¡ä¸»çº¿ç¨‹ï¼‰
    const workerResult = await this.matchWordsInWorker(textNodes);

    // 5. æ¸²æŸ“é«˜äº®å’Œä¾§è¾¹æ 
    this.highlightWords(workerResult.matches);
    this.updateSidebar(workerResult.visibleWords);
  }

  /**
   * è·å–æŒ‡å®šèŒƒå›´å†…çš„æ–‡æœ¬èŠ‚ç‚¹
   */
  getTextNodesInRange(top: number, bottom: number): Node[] {
    const walker = document.createTreeWalker(
      document.body,
      NodeFilter.SHOW_TEXT,
      {
        acceptNode: (node) => {
          // è¿‡æ»¤è§„åˆ™
          const parent = node.parentElement;
          if (!parent) return NodeFilter.FILTER_REJECT;

          // 1. å¿½ç•¥scriptã€styleæ ‡ç­¾
          if (['SCRIPT', 'STYLE', 'NOSCRIPT'].includes(parent.tagName)) {
            return NodeFilter.FILTER_REJECT;
          }

          // 2. å¿½ç•¥ä»£ç å—ï¼ˆå¯é…ç½®ï¼‰
          if (parent.closest('code, pre')) {
            return NodeFilter.FILTER_REJECT;
          }

          // 3. æ£€æŸ¥æ˜¯å¦åœ¨å¯è§†èŒƒå›´å†…
          const rect = parent.getBoundingClientRect();
          const elementTop = rect.top + window.scrollY;
          const elementBottom = elementTop + rect.height;

          if (elementBottom < top || elementTop > bottom) {
            return NodeFilter.FILTER_REJECT;
          }

          return NodeFilter.FILTER_ACCEPT;
        }
      }
    );

    const nodes: Node[] = [];
    let currentNode;
    while (currentNode = walker.nextNode()) {
      nodes.push(currentNode);
    }
    return nodes;
  }
}
```

#### 3.2 å•è¯åŒ¹é…ç®—æ³•

**Web Workerå¤„ç†**ï¼ˆé¿å…ä¸»çº¿ç¨‹å¡é¡¿ï¼‰:
```typescript
// worker/text-matcher.ts

interface MatchResult {
  word: string;           // åŸå§‹å•è¯
  normalizedWord: string; // æ ‡å‡†åŒ–åçš„å•è¯ï¼ˆå°å†™ + è¯å½¢è¿˜åŸï¼‰
  element: Node;          // æ‰€åœ¨æ–‡æœ¬èŠ‚ç‚¹
  offset: number;         // åœ¨æ–‡æœ¬èŠ‚ç‚¹ä¸­çš„åç§»é‡
  length: number;         // å•è¯é•¿åº¦
}

/**
 * åŒ¹é…æ–‡æœ¬èŠ‚ç‚¹ä¸­çš„è¯åº“å•è¯
 */
function matchWords(textNode: Node, vocabulary: Set<string>): MatchResult[] {
  const text = textNode.textContent || '';
  const matches: MatchResult[] = [];

  // æ­£åˆ™åŒ¹é…å•è¯ï¼ˆæ”¯æŒè¿å­—ç¬¦ï¼‰
  const wordRegex = /\b[a-zA-Z]+(?:-[a-zA-Z]+)*\b/g;
  let match;

  while ((match = wordRegex.exec(text)) !== null) {
    const originalWord = match[0];
    const normalizedWord = normalizeWord(originalWord); // å°å†™ + è¯å½¢è¿˜åŸ

    if (vocabulary.has(normalizedWord)) {
      matches.push({
        word: originalWord,
        normalizedWord,
        element: textNode,
        offset: match.index,
        length: originalWord.length
      });
    }
  }

  return matches;
}

/**
 * å•è¯æ ‡å‡†åŒ–ï¼ˆå°å†™ + è¯å½¢è¿˜åŸï¼‰
 */
function normalizeWord(word: string): string {
  const lowercased = word.toLowerCase();

  // ä½¿ç”¨compromise.jsè¿›è¡Œè¯å½¢è¿˜åŸ
  const doc = nlp(lowercased);
  const lemma = doc.verbs().toInfinitive().text() || // åŠ¨è¯â†’åŸå½¢
                doc.nouns().toSingular().text() ||   // åè¯â†’å•æ•°
                lowercased;

  return lemma;
}
```

#### 3.3 å•è¯é«˜äº®æ¸²æŸ“

**é«˜äº®ç­–ç•¥**:
```typescript
// content/highlighter.ts

class WordHighlighter {
  /**
   * é«˜äº®å•è¯ï¼ˆä¸ç ´åDOMç»“æ„ï¼‰
   */
  highlightMatches(matches: MatchResult[]) {
    // æŒ‰æ–‡æœ¬èŠ‚ç‚¹åˆ†ç»„
    const groupedByNode = groupBy(matches, m => m.element);

    groupedByNode.forEach((nodeMatches, textNode) => {
      // ä»åå¾€å‰æ›¿æ¢ï¼ˆé¿å…åç§»é‡å˜åŒ–ï¼‰
      nodeMatches.sort((a, b) => b.offset - a.offset);

      nodeMatches.forEach(match => {
        const wordState = getWordMemoryState(match.normalizedWord);
        const level = wordState.level;

        // åˆ›å»ºé«˜äº®å…ƒç´ 
        const span = document.createElement('span');
        span.className = `word-memo-highlight word-memo-level-${level}`;
        span.dataset.word = match.normalizedWord;
        span.textContent = match.word;

        // æ·»åŠ ç‚¹å‡»äº‹ä»¶ï¼ˆæ»šåŠ¨ä¾§è¾¹æ å®šä½ï¼‰
        span.addEventListener('click', (e) => {
          e.preventDefault();
          this.scrollToCardInSidebar(match.normalizedWord);
        });

        // æ›¿æ¢æ–‡æœ¬èŠ‚ç‚¹ä¸­çš„å•è¯
        const text = textNode.textContent || '';
        const before = text.substring(0, match.offset);
        const after = text.substring(match.offset + match.length);

        const fragment = document.createDocumentFragment();
        fragment.appendChild(document.createTextNode(before));
        fragment.appendChild(span);

        const afterNode = document.createTextNode(after);
        textNode.parentNode?.replaceChild(fragment, textNode);

        // æ›´æ–°textNodeå¼•ç”¨ä¸ºafteréƒ¨åˆ†ï¼ˆä¾›ä¸‹ä¸€æ¬¡å¾ªç¯ä½¿ç”¨ï¼‰
        textNode = afterNode;
      });
    });
  }

  /**
   * æ»šåŠ¨ä¾§è¾¹æ åˆ°æŒ‡å®šå•è¯å¡ç‰‡
   */
  scrollToCardInSidebar(word: string) {
    chrome.runtime.sendMessage({
      type: 'SCROLL_TO_CARD',
      payload: { word }
    });
  }
}
```

**CSSæ ·å¼**:
```css
/* ä¸åŒç­‰çº§çš„ä¸‹åˆ’çº¿æ ·å¼ */
.word-memo-highlight {
  cursor: pointer;
  transition: background-color 0.2s;
}

.word-memo-highlight:hover {
  background-color: rgba(var(--highlight-color-rgb), 0.1);
}

/* NEW - çº¢è‰²æ³¢æµªä¸‹åˆ’çº¿ */
.word-memo-level-0 {
  --highlight-color-rgb: 239, 68, 68;
  text-decoration: wavy underline #EF4444 2px;
  text-underline-offset: 2px;
}

/* FAMILIAR - æ©™è‰²å®çº¿ä¸‹åˆ’çº¿ */
.word-memo-level-1 {
  --highlight-color-rgb: 245, 158, 11;
  text-decoration: solid underline #F59E0B 2px;
  text-underline-offset: 2px;
}

/* LEARNING - é»„è‰²è™šçº¿ä¸‹åˆ’çº¿ */
.word-memo-level-2 {
  --highlight-color-rgb: 234, 179, 8;
  text-decoration: dashed underline #EAB308 1.5px;
  text-underline-offset: 2px;
}

/* MASTERED - ç»¿è‰²ç‚¹çŠ¶ä¸‹åˆ’çº¿ */
.word-memo-level-3 {
  --highlight-color-rgb: 34, 197, 94;
  text-decoration: dotted underline #22C55E 1px;
  text-underline-offset: 2px;
}

/* ARCHIVED - ä¸æ˜¾ç¤ºé«˜äº® */
.word-memo-level-4 {
  text-decoration: none;
}
```

#### 3.4 æ€§èƒ½ä¼˜åŒ–

| ä¼˜åŒ–ç­–ç•¥ | å®ç°æ–¹å¼ | é¢„æœŸæ•ˆæœ |
|----------|----------|----------|
| **æ‡’åŠ è½½æ‰«æ** | ä»…æ‰«æå¯è§†åŒºåŸŸ +/- 1å± | å¤§å‹é¡µé¢æ‰«ææ—¶é—´ < 100ms |
| **Debounceæ»šåŠ¨** | 200mså»¶è¿Ÿè§¦å‘ | é¿å…æ»šåŠ¨æ—¶é¢‘ç¹é‡ç»˜ |
| **Web Worker** | åå°å¤„ç†æ–‡æœ¬åŒ¹é… | ä¸»çº¿ç¨‹ä¸å¡é¡¿ |
| **IntersectionObserver** | ç›‘å¬å…ƒç´ å¯è§æ€§ | è‡ªåŠ¨æ›´æ–°ä¾§è¾¹æ  |
| **è™šæ‹Ÿæ»šåŠ¨** | ä¾§è¾¹æ ä»…æ¸²æŸ“å¯è§å¡ç‰‡ | 1000+å•è¯ä¸å¡é¡¿ |
| **RequestIdleCallback** | ç©ºé—²æ—¶é¢„åŠ è½½ä¸‹ä¸€å±å†…å®¹ | æ»šåŠ¨æ›´æµç•… |

---

### 4. ä¾§è¾¹æ UIç³»ç»Ÿ

#### 4.1 å¸ƒå±€ç»“æ„

**æ•´ä½“å¸ƒå±€**ï¼ˆå¯è°ƒæ•´å®½åº¦ï¼‰:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â†•ï¸
â”‚ ğŸ“š Word Memo          [âš™ï¸è®¾ç½®]  â”‚ Header (60px)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [å½“å‰é¡µé¢] [è¯åº“æµè§ˆ]           â”‚ Tab Bar (40px)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚  ğŸ“Œ å¾…å¤ä¹  (3) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ephemeral                 â”‚  â”‚ å¤ä¹ æé†’åŒº
â”‚  â”‚ throttle                  â”‚  â”‚ (å¯æŠ˜å )
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                 â”‚
â”‚  ğŸ” [æœç´¢è¯åº“...]  (ä»…è¯åº“Tab)  â”‚ æœç´¢æ  (40px)
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ ephemeral  ğŸ”Š  âœï¸  ğŸ—‘ï¸       â”‚â”‚
â”‚  â”‚ /ÉªËˆfem.É™r.É™l/               â”‚â”‚ å•è¯å¡ç‰‡åŒº
â”‚  â”‚ adj. çŸ­æš‚çš„ï¼›ç¬æ¯çš„          â”‚â”‚ (è™šæ‹Ÿæ»šåŠ¨)
â”‚  â”‚ n. çŸ­ç”Ÿæ¤ç‰©                 â”‚â”‚
â”‚  â”‚ [æ‚¬æµ®å±•å¼€ä¾‹å¥...]            â”‚â”‚
â”‚  â”‚ â“ æ˜¯å¦è®°ä½ï¼Ÿ               â”‚â”‚
â”‚  â”‚  [è®°ä½äº†] [è¿˜ä¸ç†Ÿ]          â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚ throttle      ğŸ”Š            â”‚â”‚
â”‚  â”‚ v. èŠ‚æµï¼›é™åˆ¶               â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚  â†“ æ»šåŠ¨æŸ¥çœ‹æ›´å¤š... (15ä¸ª)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†”ï¸ æ‹–æ‹½è¾¹ç¼˜è°ƒæ•´å®½åº¦ (300-600px)
```

#### 4.2 å•è¯å¡ç‰‡ç»„ä»¶

**å®Œæ•´å¡ç‰‡ç»“æ„**ï¼ˆæ‚¬æµ®å±•å¼€çŠ¶æ€ï¼‰:
```tsx
// components/WordCard.tsx

interface WordCardProps {
  word: WordMemoryState;
  expanded: boolean; // æ˜¯å¦å±•å¼€ä¾‹å¥
  highlighted: boolean; // æ˜¯å¦é«˜äº®ï¼ˆç‚¹å‡»é¡µé¢é«˜äº®è¯åï¼‰
}

<div className={`
  word-card
  word-card-level-${word.level}
  ${highlighted ? 'word-card-highlighted' : ''}
`}>
  {/* Header */}
  <div className="word-card-header">
    <h3 className="word-text">{word.word}</h3>
    <div className="word-actions">
      <button onClick={pronounce}>ğŸ”Š</button>
      <button onClick={editWord}>âœï¸</button>
      <button onClick={deleteWord}>ğŸ—‘ï¸</button>
    </div>
  </div>

  {/* Phonetic */}
  <div className="word-phonetic">{word.phonetic}</div>

  {/* Definitions */}
  <div className="word-definitions">
    {word.definitions.map(def => (
      <div key={def.pos}>
        <span className="pos">{def.pos}</span>
        <span className="meaning">{def.meaning}</span>
      </div>
    ))}
  </div>

  {/* Examples (å¯æŠ˜å ) */}
  {expanded && (
    <div className="word-examples">
      {word.examples.map((ex, i) => (
        <div key={i} className="example-item">
          <p className="example-en">{ex.en}</p>
          <p className="example-zh">{ex.zh}</p>
        </div>
      ))}
    </div>
  )}

  {/* Etymology (å¯æŠ˜å ) */}
  {expanded && word.etymology && (
    <div className="word-etymology">
      <span className="etymology-label">è¯æ ¹:</span>
      <span>{word.etymology}</span>
    </div>
  )}

  {/* Memory Feedback */}
  <div className="word-feedback">
    <p className="feedback-question">â“ æ˜¯å¦è®°ä½äº†è¿™ä¸ªå•è¯ï¼Ÿ</p>
    <div className="feedback-buttons">
      <button
        className="btn-remembered"
        onClick={handleRemembered}
      >
        è®°ä½äº† âœ“
      </button>
      <button
        className="btn-not-remembered"
        onClick={handleNotRemembered}
      >
        è¿˜ä¸ç†Ÿ Ã—
      </button>
    </div>
  </div>

  {/* Review Info (ä»…å¼€å‘è€…æ¨¡å¼æ˜¾ç¤º) */}
  {devMode && (
    <div className="word-meta">
      <small>
        ç­‰çº§: {word.level} |
        å¤ä¹ : {word.reviewCount}æ¬¡ |
        ä¸‹æ¬¡: {formatDate(word.nextReviewDate)}
      </small>
    </div>
  )}
</div>
```

**å¡ç‰‡é«˜äº®åŠ¨ç”»**ï¼ˆç‚¹å‡»é¡µé¢é«˜äº®è¯åï¼‰:
```css
@keyframes cardHighlight {
  0% {
    transform: scale(1);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
  25% {
    transform: scale(1.05) translateY(-4px);
    box-shadow: 0 8px 24px var(--highlight-color);
  }
  50% {
    transform: scale(1.08) translateY(-8px);
  }
  75% {
    transform: scale(1.05) translateY(-4px);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
  }
}

.word-card-highlighted {
  animation: cardHighlight 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  border: 3px solid var(--highlight-color);
}
```

#### 4.3 Tabåˆ‡æ¢

**ä¸¤ä¸ªTab**:
1. **å½“å‰é¡µé¢**: æ˜¾ç¤ºé¡µé¢å¯è§†åŒºåŸŸå†…çš„è¯åº“å•è¯ï¼ˆå®æ—¶æ›´æ–°ï¼‰
2. **è¯åº“æµè§ˆ**: æ˜¾ç¤ºå…¨éƒ¨è¯åº“å•è¯ï¼ˆæ”¯æŒæœç´¢ã€æ’åºï¼‰

**Tabåˆ‡æ¢é€»è¾‘**:
```typescript
// hooks/useActiveTab.ts

type TabType = 'current-page' | 'vocabulary';

function useActiveTab() {
  const [activeTab, setActiveTab] = useState<TabType>('current-page');

  // å½“å‰é¡µé¢Tabï¼šä»…æ˜¾ç¤ºå¯è§†åŒºåŸŸå•è¯
  const currentPageWords = useVisibleWords();

  // è¯åº“æµè§ˆTabï¼šæ˜¾ç¤ºå…¨éƒ¨å•è¯
  const allWords = useVocabulary();

  const displayedWords = activeTab === 'current-page'
    ? currentPageWords
    : allWords;

  return { activeTab, setActiveTab, displayedWords };
}
```

#### 4.4 æœç´¢åŠŸèƒ½ï¼ˆè¯åº“æµè§ˆTabï¼‰

**æœç´¢ç»„ä»¶**:
```tsx
// components/VocabSearch.tsx

interface SearchProps {
  onSearch: (query: string) => void;
}

function VocabSearch({ onSearch }: SearchProps) {
  const [query, setQuery] = useState('');

  // Debounceä¼˜åŒ–
  const debouncedSearch = useMemo(
    () => debounce((q: string) => onSearch(q), 300),
    [onSearch]
  );

  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {
    const value = e.target.value;
    setQuery(value);
    debouncedSearch(value);
  };

  return (
    <div className="vocab-search">
      <input
        type="text"
        placeholder="ğŸ” æœç´¢å•è¯æˆ–é‡Šä¹‰..."
        value={query}
        onChange={handleChange}
      />
      {query && (
        <button onClick={() => { setQuery(''); onSearch(''); }}>
          âœ•
        </button>
      )}
    </div>
  );
}
```

**æ¨¡ç³Šæœç´¢å®ç°**ï¼ˆä½¿ç”¨Fuse.jsï¼‰:
```typescript
// lib/search.ts

import Fuse from 'fuse.js';

const fuseOptions = {
  keys: [
    { name: 'word', weight: 2 },              // å•è¯åŸæ–‡ï¼ˆæƒé‡é«˜ï¼‰
    { name: 'definitions.meaning', weight: 1 }, // ä¸­æ–‡é‡Šä¹‰
  ],
  threshold: 0.3, // æ¨¡ç³Šåº¦ï¼ˆ0=ç²¾ç¡®åŒ¹é…ï¼Œ1=å…¨åŒ¹é…ï¼‰
  includeScore: true,
};

function searchVocabulary(words: WordData[], query: string): WordData[] {
  if (!query.trim()) return words;

  const fuse = new Fuse(words, fuseOptions);
  const results = fuse.search(query);

  return results.map(r => r.item);
}
```

#### 4.5 å®½åº¦è°ƒæ•´

**å¯æ‹–æ‹½è¾¹æ¡†**:
```tsx
// components/ResizablePanel.tsx

function ResizablePanel({ children }: PropsWithChildren) {
  const [width, setWidth] = useState(400); // é»˜è®¤400px
  const [isResizing, setIsResizing] = useState(false);

  const handleMouseDown = () => setIsResizing(true);

  const handleMouseMove = (e: MouseEvent) => {
    if (!isResizing) return;

    const newWidth = window.innerWidth - e.clientX;
    const clampedWidth = Math.max(300, Math.min(600, newWidth));

    setWidth(clampedWidth);
    chrome.storage.local.set({ sidebarWidth: clampedWidth });
  };

  const handleMouseUp = () => setIsResizing(false);

  useEffect(() => {
    if (isResizing) {
      document.addEventListener('mousemove', handleMouseMove);
      document.addEventListener('mouseup', handleMouseUp);
      return () => {
        document.removeEventListener('mousemove', handleMouseMove);
        document.removeEventListener('mouseup', handleMouseUp);
      };
    }
  }, [isResizing]);

  return (
    <div className="resizable-panel" style={{ width: `${width}px` }}>
      <div
        className="resize-handle"
        onMouseDown={handleMouseDown}
      />
      {children}
    </div>
  );
}
```

#### 4.6 æŠ˜å /å±•å¼€

**ä¾§è¾¹æ æŠ˜å æŒ‰é’®**ï¼ˆHeaderå³ä¸Šè§’ï¼‰:
```tsx
// App.tsx

function App() {
  const [collapsed, setCollapsed] = useState(false);

  return (
    <div className={`sidebar ${collapsed ? 'sidebar-collapsed' : ''}`}>
      <header>
        <h1>ğŸ“š Word Memo</h1>
        <button onClick={() => setCollapsed(!collapsed)}>
          {collapsed ? 'â–¶' : 'â—€'}
        </button>
      </header>

      {!collapsed && (
        <div className="sidebar-content">
          {/* Tabã€æœç´¢ã€å¡ç‰‡åˆ—è¡¨ */}
        </div>
      )}
    </div>
  );
}
```

**æŠ˜å åŠ¨ç”»**:
```css
.sidebar {
  width: 400px;
  transition: width 0.3s ease;
}

.sidebar-collapsed {
  width: 48px; /* ä»…æ˜¾ç¤ºæŠ˜å æŒ‰é’® */
}

.sidebar-content {
  opacity: 1;
  transition: opacity 0.2s ease;
}

.sidebar-collapsed .sidebar-content {
  opacity: 0;
  pointer-events: none;
}
```

#### 4.7 è™šæ‹Ÿæ»šåŠ¨ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰

**ä½¿ç”¨react-windowåº“**:
```tsx
// components/VirtualWordList.tsx

import { FixedSizeList as List } from 'react-window';

interface VirtualWordListProps {
  words: WordMemoryState[];
  highlightedWord?: string;
}

function VirtualWordList({ words, highlightedWord }: VirtualWordListProps) {
  const listRef = useRef<List>(null);

  // è®¡ç®—å¡ç‰‡é«˜åº¦ï¼ˆæ ¹æ®è®°å¿†ç­‰çº§ï¼‰
  const getItemSize = (index: number) => {
    const word = words[index];
    const heights = {
      [MemoryLevel.NEW]: 120,
      [MemoryLevel.FAMILIAR]: 100,
      [MemoryLevel.LEARNING]: 100,
      [MemoryLevel.MASTERED]: 70,
    };
    return heights[word.level] || 100;
  };

  // æ»šåŠ¨åˆ°æŒ‡å®šå•è¯
  useEffect(() => {
    if (highlightedWord) {
      const index = words.findIndex(w => w.word === highlightedWord);
      if (index >= 0) {
        listRef.current?.scrollToItem(index, 'center');
      }
    }
  }, [highlightedWord, words]);

  return (
    <List
      ref={listRef}
      height={600} // å¯è§†åŒºåŸŸé«˜åº¦
      itemCount={words.length}
      itemSize={getItemSize}
      width="100%"
    >
      {({ index, style }) => (
        <div style={style}>
          <WordCard
            word={words[index]}
            highlighted={words[index].word === highlightedWord}
          />
        </div>
      )}
    </List>
  );
}
```

---

### 5. è®¾ç½®ç³»ç»Ÿ

#### 5.1 è®¾ç½®é¡µé¢

**è®¾ç½®å…¥å£**: ä¾§è¾¹æ Headerå³ä¸Šè§’âš™ï¸æŒ‰é’®

**è®¾ç½®é¡¹**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš™ï¸ è®¾ç½®                    [Ã—]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚ ğŸ¤– LLMé…ç½®                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ APIç«¯ç‚¹:                     â”‚â”‚
â”‚ â”‚ [https://api.openai.com/... ]â”‚â”‚
â”‚ â”‚                              â”‚â”‚
â”‚ â”‚ API Key:                     â”‚â”‚
â”‚ â”‚ [sk-*********************]   â”‚â”‚
â”‚ â”‚ [æ˜¾ç¤º] [æµ‹è¯•è¿æ¥]            â”‚â”‚
â”‚ â”‚                              â”‚â”‚
â”‚ â”‚ æ¨¡å‹:                        â”‚â”‚
â”‚ â”‚ [gpt-3.5-turbo-0125 â–¼]      â”‚â”‚
â”‚ â”‚ ï¼ˆæ¨èï¼Œæ€§ä»·æ¯”æœ€ä¼˜ï¼‰         â”‚â”‚
â”‚ â”‚                              â”‚â”‚
â”‚ â”‚ Temperature: 0.3             â”‚â”‚
â”‚ â”‚ [â”â”â”â—â”â”â”â”â”â”] 0.0 ~ 1.0      â”‚â”‚
â”‚ â”‚                              â”‚â”‚
â”‚ â”‚ ğŸ’¡ æ”¯æŒä»»ä½•OpenAIå…¼å®¹API     â”‚â”‚
â”‚ â”‚    OpenAIã€Azureã€å›½å†…å¤§æ¨¡å‹ â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚ ğŸ¨ æ˜¾ç¤ºè®¾ç½®                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ â˜‘ï¸ é«˜äº®é¡µé¢ä¸­çš„è¯åº“å•è¯      â”‚â”‚
â”‚ â”‚ â˜‘ï¸ å¿½ç•¥ä»£ç å—ä¸­çš„å•è¯        â”‚â”‚
â”‚ â”‚ â˜‘ï¸ æ˜¾ç¤ºå¾…å¤ä¹ æé†’            â”‚â”‚
â”‚ â”‚ â˜ è‡ªåŠ¨æ’­æ”¾å•è¯å‘éŸ³           â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚ ğŸ“Š æ•°æ®ç®¡ç†                     â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ è¯åº“å•è¯æ•°: 127              â”‚â”‚
â”‚ â”‚ å ç”¨ç©ºé—´: 2.3 MB             â”‚â”‚
â”‚ â”‚                              â”‚â”‚
â”‚ â”‚ [å¯¼å‡ºè¯åº“] [å¯¼å…¥è¯åº“]        â”‚â”‚
â”‚ â”‚ [æ¸…ç©ºè¯åº“] (éœ€äºŒæ¬¡ç¡®è®¤)      â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚ â„¹ï¸ å…³äº                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ Word Memo v1.0.0             â”‚â”‚
â”‚ â”‚ [ä½¿ç”¨å¸®åŠ©] [é—®é¢˜åé¦ˆ]        â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                 â”‚
â”‚        [å–æ¶ˆ]  [ä¿å­˜è®¾ç½®]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.2 APIè¿æ¥æµ‹è¯•

**æµ‹è¯•æµç¨‹**:
```typescript
async function testLLMConnection(config: LLMConfig): Promise<TestResult> {
  try {
    const response = await fetch(config.apiEndpoint, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${config.apiKey}`,
      },
      body: JSON.stringify({
        model: config.model,
        messages: [
          { role: 'user', content: 'Hello' }
        ],
        max_tokens: 10,
      }),
      signal: AbortSignal.timeout(10000), // 10ç§’è¶…æ—¶
    });

    if (!response.ok) {
      const error = await response.json();
      return {
        success: false,
        message: `APIé”™è¯¯: ${error.error?.message || response.statusText}`
      };
    }

    return {
      success: true,
      message: 'âœ… è¿æ¥æˆåŠŸï¼'
    };
  } catch (error) {
    return {
      success: false,
      message: `âŒ è¿æ¥å¤±è´¥: ${error.message}`
    };
  }
}
```

---

## ğŸ—‚ï¸ æ•°æ®æ¨¡å‹

### æ ¸å¿ƒæ•°æ®ç»“æ„

```typescript
// types/index.ts

/**
 * å•è¯å®Œæ•´æ•°æ®ç»“æ„
 */
interface WordData {
  // åŸºç¡€ä¿¡æ¯
  word: string;                  // å•è¯åŸæ–‡ï¼ˆå°å†™ï¼‰
  phonetic: string;              // éŸ³æ ‡

  // é‡Šä¹‰
  definitions: Definition[];     // è¯æ€§å’Œé‡Šä¹‰
  examples: Example[];           // ä¾‹å¥
  etymology: string;             // è¯æ ¹è¯ç¼€

  // è®°å¿†çŠ¶æ€
  memoryState: WordMemoryState;

  // å…ƒæ•°æ®
  addedDate: Date;               // æ·»åŠ æ—¶é—´
  updatedDate: Date;             // æœ€åç¼–è¾‘æ—¶é—´
  source?: string;               // æ¥æºé¡µé¢URLï¼ˆå¯é€‰ï¼‰
}

/**
 * è¯æ€§+é‡Šä¹‰
 */
interface Definition {
  pos: string;        // è¯æ€§ï¼ˆn./v./adj./adv.ç­‰ï¼‰
  meaning: string;    // ä¸­æ–‡é‡Šä¹‰
}

/**
 * ä¾‹å¥
 */
interface Example {
  en: string;         // è‹±æ–‡ä¾‹å¥
  zh: string;         // ä¸­æ–‡ç¿»è¯‘
}

/**
 * è®°å¿†çŠ¶æ€ï¼ˆè§ [2.1 å¤šçº§è®°å¿†æ¨¡å‹]ï¼‰
 */
interface WordMemoryState {
  level: MemoryLevel;
  reviewCount: number;
  correctCount: number;
  lastReviewDate: Date;
  nextReviewDate: Date;
  lastSeenDate: Date;
}

/**
 * LLMé…ç½®
 */
interface LLMConfig {
  apiEndpoint: string;
  apiKey: string;
  model: string;
  temperature: number;
  timeout: number;
}

/**
 * ç”¨æˆ·è®¾ç½®
 */
interface UserSettings {
  llm: LLMConfig;
  display: {
    enableHighlight: boolean;      // æ˜¯å¦é«˜äº®é¡µé¢å•è¯
    ignoreCodeBlocks: boolean;     // æ˜¯å¦å¿½ç•¥ä»£ç å—
    showReviewReminder: boolean;   // æ˜¯å¦æ˜¾ç¤ºå¾…å¤ä¹ æé†’
    autoPlayPronunciation: boolean; // æ˜¯å¦è‡ªåŠ¨æ’­æ”¾å‘éŸ³
  };
  sidebar: {
    width: number;                 // ä¾§è¾¹æ å®½åº¦ï¼ˆ300-600pxï¼‰
    collapsed: boolean;            // æ˜¯å¦æŠ˜å 
  };
}
```

### å­˜å‚¨æ–¹æ¡ˆ

**Chrome Storage API**:
```typescript
// lib/storage.ts

/**
 * å­˜å‚¨é”®å®šä¹‰
 */
enum StorageKey {
  VOCABULARY = 'vocabulary',         // Map<string, WordData>
  SETTINGS = 'settings',             // UserSettings
  REVIEW_QUEUE = 'reviewQueue',      // string[] (å¾…å¤ä¹ å•è¯åˆ—è¡¨)
}

/**
 * ä¿å­˜å•è¯
 */
async function saveWord(word: WordData): Promise<void> {
  const vocabulary = await getVocabulary();
  vocabulary.set(word.word, word);

  await chrome.storage.local.set({
    [StorageKey.VOCABULARY]: Object.fromEntries(vocabulary)
  });
}

/**
 * è·å–è¯åº“
 */
async function getVocabulary(): Promise<Map<string, WordData>> {
  const result = await chrome.storage.local.get(StorageKey.VOCABULARY);
  const data = result[StorageKey.VOCABULARY] || {};
  return new Map(Object.entries(data));
}

/**
 * åˆ é™¤å•è¯
 */
async function deleteWord(word: string): Promise<void> {
  const vocabulary = await getVocabulary();
  vocabulary.delete(word);

  await chrome.storage.local.set({
    [StorageKey.VOCABULARY]: Object.fromEntries(vocabulary)
  });
}

/**
 * è·å–å¾…å¤ä¹ å•è¯
 */
async function getReviewQueue(): Promise<string[]> {
  const vocabulary = await getVocabulary();
  const now = Date.now();

  const dueWords = Array.from(vocabulary.values())
    .filter(word => word.memoryState.nextReviewDate.getTime() <= now)
    .map(word => word.word);

  return dueWords;
}
```

**å­˜å‚¨ç©ºé—´ä¼°ç®—**:
```
å•ä¸ªå•è¯æ•°æ®å¤§å°: ~2KBï¼ˆå«é‡Šä¹‰ã€ä¾‹å¥ã€è¯æ ¹ï¼‰
1000ä¸ªå•è¯: 2MB
Chrome Storage Limit: 10MB
æœ€å¤§å®¹é‡: ~5000ä¸ªå•è¯
```

---

## ğŸ”„ äº¤äº’æµç¨‹å›¾

### å®Œæ•´ç”¨æˆ·æ—…ç¨‹

```mermaid
graph TD
    A[ç”¨æˆ·æµè§ˆæŠ€æœ¯æ–‡æ¡£] --> B{é‡åˆ°ç”Ÿè¯?}
    B -->|æ˜¯| C[é€‰ä¸­å•è¯]
    C --> D[å³é”®èœå•: æ·»åŠ åˆ°è¯åº“]
    D --> E[Content Scriptæ•è·]
    E --> F[å‘é€åˆ°Background Worker]
    F --> G[è°ƒç”¨LLM API]
    G -->|æˆåŠŸ| H[è§£æJSONå“åº”]
    G -->|å¤±è´¥| I[æ˜¾ç¤ºé”™è¯¯+é‡è¯•æŒ‰é’®]
    H --> J[ä¿å­˜åˆ°chrome.storage]
    J --> K[é€šçŸ¥Content Script]
    K --> L[é¡µé¢é«˜äº®å•è¯]
    K --> M[ä¾§è¾¹æ æ˜¾ç¤ºå¡ç‰‡]
    M --> N{ç”¨æˆ·äº¤äº’}
    N -->|æ‚¬æµ®å¡ç‰‡| O[å±•å¼€ä¾‹å¥å’Œè¯æ ¹]
    N -->|ç‚¹å‡»è®°ä½| P[ç­‰çº§+1, æ›´æ–°å¤ä¹ æ—¶é—´]
    N -->|ç‚¹å‡»ä¸ç†Ÿ| Q[æ›´æ–°å¤ä¹ æ—¶é—´, ç­‰çº§ä¸å˜]
    N -->|ç‚¹å‡»ç¼–è¾‘| R[æ‰“å¼€ç¼–è¾‘å¼¹çª—]
    N -->|ç‚¹å‡»åˆ é™¤| S[äºŒæ¬¡ç¡®è®¤ååˆ é™¤]

    B -->|å¦| T[ç»§ç»­é˜…è¯»]
    T --> U{æ»šåŠ¨é¡µé¢?}
    U -->|æ˜¯| V[Debounce 200msåæ‰«æ]
    V --> W[æ›´æ–°ä¾§è¾¹æ æ˜¾ç¤ºçš„å•è¯]
    W --> T

    X[åå°å®šæ—¶ä»»åŠ¡: 30åˆ†é’Ÿ] --> Y[æ£€æŸ¥æ‰€æœ‰å•è¯]
    Y --> Z{è¶…è¿‡å¤ä¹ æ—¶é—´1.5å€?}
    Z -->|æ˜¯| AA[è‡ªåŠ¨é™çº§]
    AA --> AB[æ›´æ–°æ ·å¼]
    Z -->|å¦| Y
```

---

## ğŸš€ å¼€å‘è·¯çº¿å›¾

### Phase 1: MVPï¼ˆ2å‘¨ï¼‰ - æ ¸å¿ƒéªŒè¯
**ç›®æ ‡**: éªŒè¯æ ¸å¿ƒåŠŸèƒ½å¯è¡Œæ€§ï¼Œå¿«é€Ÿè¿­ä»£

âœ… **åŠŸèƒ½èŒƒå›´**:
- å³é”®æ·»åŠ å•è¯
- LLMç”Ÿæˆé‡Šä¹‰ï¼ˆOpenAI APIï¼‰
- ä¾§è¾¹æ å±•ç¤ºå¡ç‰‡ï¼ˆæ— è™šæ‹Ÿæ»šåŠ¨ï¼‰
- ç®€å•è®°å¿†åé¦ˆï¼ˆè®°ä½/ä¸ç†Ÿï¼Œæ— é—å¿˜æ›²çº¿ï¼‰
- é¡µé¢é«˜äº®ï¼ˆçº¢è‰²ä¸‹åˆ’çº¿ï¼Œæ— ç­‰çº§åŒºåˆ†ï¼‰
- æœ¬åœ°å­˜å‚¨ï¼ˆchrome.storage.localï¼‰
- åŸºç¡€è®¾ç½®é¡µï¼ˆä»…LLMé…ç½®ï¼‰

âŒ **ä¸åŒ…å«**:
- é—å¿˜æ›²çº¿ç®—æ³•
- å¤šçº§è®°å¿†çŠ¶æ€
- è¯åº“æµè§ˆTab
- å¯è§†åŒºåŸŸæ£€æµ‹ï¼ˆå…¨é¡µæ‰«æï¼‰
- è™šæ‹Ÿæ»šåŠ¨
- è¯å½¢è¿˜åŸ

**æŠ€æœ¯å€ºåŠ¡**:
- å…¨é¡µæ‰«ææ€§èƒ½é—®é¢˜ï¼ˆåç»­ä¼˜åŒ–ï¼‰
- å•ä¸€è®°å¿†çŠ¶æ€ï¼ˆåç»­æ‰©å±•ï¼‰

---

### Phase 2: V1.0ï¼ˆ4å‘¨ï¼‰ - å®Œæ•´ç‰ˆ
**ç›®æ ‡**: å®ç°PRDä¸­çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

âœ… **æ–°å¢åŠŸèƒ½**:
- å¤šçº§è®°å¿†çŠ¶æ€ï¼ˆNEW â†’ FAMILIAR â†’ LEARNING â†’ MASTEREDï¼‰
- é—å¿˜æ›²çº¿ç®—æ³•ï¼ˆSuperMemo SM-2ç®€åŒ–ç‰ˆï¼‰
- è‡ªåŠ¨é™çº§æœºåˆ¶ï¼ˆåå°å®šæ—¶ä»»åŠ¡ï¼‰
- å®æ—¶å¯è§†åŒºåŸŸæ‰«æï¼ˆIntersectionObserver + Debounceï¼‰
- è¯åº“æµè§ˆTab + æ¨¡ç³Šæœç´¢ï¼ˆFuse.jsï¼‰
- è™šæ‹Ÿæ»šåŠ¨ï¼ˆreact-windowï¼‰
- ä¾§è¾¹æ å®½åº¦è°ƒæ•´ + æŠ˜å /å±•å¼€
- ç¼–è¾‘/åˆ é™¤å•è¯
- å•è¯å¡ç‰‡åˆ†çº§æ ·å¼ï¼ˆé¢œè‰²+ä¸‹åˆ’çº¿+å¤§å°ï¼‰
- ç‚¹å‡»é¡µé¢é«˜äº®è¯ â†’ ä¾§è¾¹æ å®šä½ + åŠ¨ç”»
- è¯å½¢è¿˜åŸï¼ˆcompromise.jsï¼‰
- å¾…å¤ä¹ æé†’

**æ€§èƒ½ç›®æ ‡**:
- é¡µé¢æ‰«ææ—¶é—´ < 100msï¼ˆ1000+å•è¯é¡µé¢ï¼‰
- ä¾§è¾¹æ æ»šåŠ¨æµç•…ï¼ˆ60fpsï¼‰
- LLMç”Ÿæˆè€—æ—¶ < 5s

---

### Phase 1.5: V1.1ï¼ˆå·²å®ç°ï¼‰- ç»ƒä¹ æ¨¡å¼
**æ–°å¢åŠŸèƒ½**ï¼ˆ2026å¹´1æœˆï¼‰:

âœ… **ç»ƒä¹ åŠŸèƒ½**:
- å•è¯ç»ƒä¹ æ¨¡å¼ï¼ˆé€‰æ‹©é¢˜å½¢å¼ï¼‰
- æ¯æ¬¡æœ€å¤š5é“é¢˜ï¼Œä¼˜å…ˆé€‰æ‹©éœ€è¦å¤ä¹ çš„å•è¯
- æ™ºèƒ½é€‰é¢˜ç®—æ³•ï¼ˆè¿‡æœŸå•è¯ä¼˜å…ˆï¼‰
- ç­”é¢˜åé¦ˆä¸è§£æ
- ç­”å¯¹å·²è¿‡æœŸå•è¯å¯å‡çº§ï¼Œç­”é”™é™çº§
- é¢˜ç›®ç¼“å­˜æœºåˆ¶ï¼ˆé¿å…é‡å¤ç”Ÿæˆï¼‰

---

### Phase 2: V2.0ï¼ˆæœªæ¥ï¼‰ - å¢å¼ºç‰ˆ
**å¯é€‰åŠŸèƒ½**ï¼ˆæ ¹æ®ç”¨æˆ·åé¦ˆä¼˜å…ˆçº§æ’åºï¼‰:

ğŸ”® **é«˜çº§åŠŸèƒ½**:
- â˜ï¸ äº‘åŒæ­¥ï¼ˆè·¨è®¾å¤‡ï¼‰
- ğŸ“¤ å¯¼å‡ºAnkiå¡ç‰‡
- ğŸŒ³ è¯æ ¹è¯ç¼€è”æƒ³ç½‘ç»œ
- ğŸ”Š è¯­éŸ³æœ—è¯»ï¼ˆWeb Speech API + åœ¨çº¿TTSï¼‰
- ğŸ“ å•è¯ç¬”è®°åŠŸèƒ½
- ğŸ“Š ç»Ÿè®¡é¢æ¿ï¼ˆå­¦ä¹ æ›²çº¿ã€æŒæ¡åº¦åˆ†å¸ƒï¼‰
- ğŸ® æ¸¸æˆåŒ–å­¦ä¹ ï¼ˆå•è¯é—¯å…³ã€æ¯æ—¥æŒ‘æˆ˜ï¼‰
- ğŸ¤ ç¤¾åŒºè¯åº“ï¼ˆåˆ†äº«/å¯¼å…¥ä»–äººè¯åº“ï¼‰
- ğŸŒ å¤šè¯­è¨€æ”¯æŒï¼ˆæ—¥è¯­ã€æ³•è¯­ç­‰ï¼‰
- ğŸ§ª A/Bæµ‹è¯•ï¼ˆä¸åŒè®°å¿†ç®—æ³•å¯¹æ¯”ï¼‰

---

## âš ï¸ æŠ€æœ¯é£é™©ä¸ç¼“è§£æ–¹æ¡ˆ

| é£é™© | ä¸¥é‡æ€§ | æ¦‚ç‡ | å½±å“ | ç¼“è§£æ–¹æ¡ˆ |
|------|--------|------|------|----------|
| **LLMæˆæœ¬è¿‡é«˜** | ğŸŸ¡ ä¸­ | é«˜ | ç”¨æˆ·è´Ÿæ‹…å¢åŠ  | 1. ä½¿ç”¨gpt-3.5-turbo<br>2. ç¼“å­˜å¸¸è§è¯<br>3. æä¾›ç¦»çº¿è¯å…¸é™çº§ |
| **é¡µé¢æ‰«ææ€§èƒ½** | ğŸ”´ é«˜ | ä¸­ | å¤§å‹é¡µé¢å¡é¡¿ | 1. Web Workerå¤„ç†<br>2. å¯è§†åŒºåŸŸé™åˆ¶<br>3. Debounceä¼˜åŒ– |
| **API Keyæ³„éœ²** | ğŸ”´ é«˜ | ä½ | å®‰å…¨é£é™© | 1. æœ¬åœ°åŠ å¯†å­˜å‚¨<br>2. ä¸ä¸Šä¼ åˆ°æœåŠ¡å™¨<br>3. æç¤ºç”¨æˆ·ä¿ç®¡ |
| **è·¨ç«™ç‚¹å…¼å®¹æ€§** | ğŸŸ¡ ä¸­ | ä¸­ | æŸäº›ç½‘ç«™æ— æ³•ä½¿ç”¨ | 1. CSPæ£€æµ‹<br>2. ç™½åå•æœºåˆ¶<br>3. ä¼˜é›…é™çº§ |
| **è¯å½¢è¿˜åŸå‡†ç¡®æ€§** | ğŸŸ¢ ä½ | ä¸­ | å•è¯åŒ¹é…å¤±è´¥ | 1. compromise.jsåº“<br>2. ç”¨æˆ·æ‰‹åŠ¨æ·»åŠ è¯å½¢ |
| **Manifest V3é™åˆ¶** | ğŸŸ¡ ä¸­ | ä½ | Service Workerç”Ÿå‘½å‘¨æœŸçŸ­ | 1. ä½¿ç”¨chrome.alarms<br>2. æ¶ˆæ¯ä¼ é€’æœºåˆ¶ |

---

## ğŸ“ æˆåŠŸæŒ‡æ ‡

### MVPé˜¶æ®µ
- âœ… å•è¯æ·»åŠ æˆåŠŸç‡ > 95%
- âœ… LLMç”ŸæˆæˆåŠŸç‡ > 90%
- âœ… é¡µé¢æ‰«ææ—¶é—´ < 500msï¼ˆå°å‹é¡µé¢ï¼‰
- âœ… ç”¨æˆ·èƒ½å®Œæˆå®Œæ•´æ·»åŠ â†’å¤ä¹ æµç¨‹

### V1.0é˜¶æ®µ
- âœ… é¡µé¢æ‰«ææ—¶é—´ < 100msï¼ˆ1000+å•è¯ï¼‰
- âœ… ä¾§è¾¹æ æ¸²æŸ“å¸§ç‡ > 55fps
- âœ… LLMå“åº”æ—¶é—´ < 5s
- âœ… ç”¨æˆ·ç•™å­˜ç‡ > 60%ï¼ˆ7å¤©ï¼‰
- âœ… å¹³å‡è¯åº“å•è¯æ•° > 50ï¼ˆæ´»è·ƒç”¨æˆ·ï¼‰

### V2.0é˜¶æ®µ
- âœ… DAU > 1000
- âœ… ç”¨æˆ·NPSè¯„åˆ† > 50
- âœ… å¹³å‡å­¦ä¹ æ—¶é•¿ > 15min/å¤©
- âœ… å•è¯æŒæ¡ç‡ > 70%ï¼ˆMASTEREDåŠä»¥ä¸Šï¼‰

---

## ğŸ“ é™„å½•

### A. Manifest V3é…ç½®ç¤ºä¾‹

```json
{
  "manifest_version": 3,
  "name": "Word Memo - è¯æ±‡è®°å¿†åŠ©æ‰‹",
  "version": "1.0.0",
  "description": "éä¾µå…¥å¼è‹±æ–‡é˜…è¯»è¾…åŠ©ä¸AIé©±åŠ¨çš„è¯æ±‡è®°å¿†ç®¡ç†å·¥å…·",

  "permissions": [
    "storage",
    "contextMenus",
    "sidePanel",
    "alarms"
  ],

  "host_permissions": [
    "https://*/*"
  ],

  "background": {
    "service_worker": "background/service-worker.js"
  },

  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["content/scanner.js"],
      "css": ["content/highlight.css"],
      "run_at": "document_idle"
    }
  ],

  "side_panel": {
    "default_path": "sidepanel/index.html"
  },

  "action": {
    "default_icon": "icons/icon48.png",
    "default_title": "æ‰“å¼€Word Memo"
  },

  "icons": {
    "16": "icons/icon16.png",
    "48": "icons/icon48.png",
    "128": "icons/icon128.png"
  }
}
```

### B. ä¾èµ–åº“æ¸…å•

| åº“å | ç‰ˆæœ¬ | ç”¨é€” | è®¸å¯è¯ |
|------|------|------|--------|
| react | 18.2.0 | UIæ¡†æ¶ | MIT |
| typescript | 5.0+ | ç±»å‹ç³»ç»Ÿ | Apache 2.0 |
| zustand | 4.4.0 | çŠ¶æ€ç®¡ç† | MIT |
| tailwindcss | 3.3.0 | æ ·å¼æ–¹æ¡ˆ | MIT |
| fuse.js | 6.6.0 | æ¨¡ç³Šæœç´¢ | Apache 2.0 |
| compromise | 14.0.0 | è¯å½¢è¿˜åŸ | MIT |
| react-window | 1.8.0 | è™šæ‹Ÿæ»šåŠ¨ | MIT |
| vite | 4.5.0 | æ„å»ºå·¥å…· | MIT |

### C. æœ¯è¯­è¡¨

| æœ¯è¯­ | å®šä¹‰ |
|------|------|
| **è¯åº“** | ç”¨æˆ·æ·»åŠ çš„æ‰€æœ‰å•è¯çš„é›†åˆ |
| **è®°å¿†ç­‰çº§** | å•è¯çš„è®°å¿†ç†Ÿç»ƒåº¦ï¼ˆNEW/FAMILIAR/LEARNING/MASTERED/ARCHIVEDï¼‰ |
| **é—å¿˜æ›²çº¿** | åŸºäºæ—¶é—´çš„è®°å¿†è¡°å‡æ¨¡å‹ |
| **è¯å½¢è¿˜åŸ** | å°†å•è¯å˜ä½“è¿˜åŸä¸ºåŸå½¢ï¼ˆå¦‚runningâ†’runï¼‰ |
| **å¯è§†åŒºåŸŸ** | ç”¨æˆ·å½“å‰æµè§ˆå™¨çª—å£å¯è§çš„é¡µé¢åŒºåŸŸ |
| **ä¾§è¾¹æ ** | Edgeæµè§ˆå™¨çš„Side Panel APIæä¾›çš„å›ºå®šä¾§è¾¹UIåŒºåŸŸ |
| **è™šæ‹Ÿæ»šåŠ¨** | ä»…æ¸²æŸ“å¯è§åŒºåŸŸå†…çš„åˆ—è¡¨é¡¹ï¼Œæå‡æ€§èƒ½ |

---

## ğŸ“ è”ç³»æ–¹å¼

- **é¡¹ç›®è´Ÿè´£äºº**: [å¾…å¡«å†™]
- **æŠ€æœ¯è´Ÿè´£äºº**: [å¾…å¡«å†™]
- **åé¦ˆæ¸ é“**: [GitHub Issues / Email]

---

**æ–‡æ¡£ç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2026-01-05
**ä¸‹æ¬¡è¯„å®¡**: Phase 1å®Œæˆå
